{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/komba/Gestion-contenu/FRONTEND/app/dashboard/page.tsx"],"sourcesContent":["'use client';\r\nimport RequireAuth from \"@/components/RequireAuth\";\r\nimport Nav from \"@/components/Nav\";\r\n// import BarChart from \"@/components/chart/Chart\";\r\nimport MobileBar from \"@/components/MobileBar\";\r\nimport { useEffect, useState } from \"react\";\r\n\r\nimport {\r\n  PieChart,\r\n  Pie,\r\n  Cell,\r\n  Tooltip,\r\n  Legend,\r\n  BarChart,\r\n  Bar,\r\n  XAxis,\r\n  YAxis,\r\n  ResponsiveContainer,\r\n} from 'recharts';\r\n\r\nconst COLORS = ['#8884d8', '#82ca9d', '#ffc658', '#ff8042', '#a4de6c', '#d0ed57'];\r\n\r\n\r\nexport default function DashboardPage() {\r\n\r\n const [stats, setStats] = useState<any>(null);\r\n  const [statusFilter, setStatusFilter] = useState<string>('');\r\n  const [dateFilter, setDateFilter] = useState<string>('');\r\n\r\n  useEffect(() => {\r\n  const queryParams = new URLSearchParams();\r\n  if (statusFilter) queryParams.append(\"statut\", statusFilter);\r\n  if (dateFilter) queryParams.append(\"date\", dateFilter);\r\n\r\n  fetch(`http://localhost:3000/api/content/stats?${queryParams.toString()}`)\r\n    .then((res) => res.json())\r\n    .then((data) => {\r\n      console.log(\"Donn√©es re√ßues:\", data); \r\n      setStats(data);\r\n    })\r\n    .catch(console.error);\r\n}, [statusFilter, dateFilter]);\r\n\r\n\r\n  if (!stats) return <p className=\"p-6 text-lg\">Chargement des statistiques...</p>;\r\n\r\n  return (\r\n    // <RequireAuth>\r\n    //   <Nav/>\r\n    //   <MobileBar/>\r\n      \r\n    //   <div>\r\n    //     <h1>Dashboard s√©curis√©</h1>\r\n    //   </div>\r\n    // </RequireAuth>\r\n\r\n      <div className=\"p-6\">\r\n      <h1 className=\"text-3xl font-bold mb-6\">üìä Dashboard des contenus</h1>\r\n\r\n      <div className=\"flex gap-4 mb-6\">\r\n        <select\r\n          value={statusFilter}\r\n          onChange={(e) => setStatusFilter(e.target.value)}\r\n          className=\"border rounded p-2\"\r\n        >\r\n          <option value=\"\">Tous les statuts</option>\r\n          <option value=\"brouillon\">Brouillon</option>\r\n          <option value=\"programm√©\">Programm√©</option>\r\n          <option value=\"publi√©\">Publi√©</option>\r\n        </select>\r\n\r\n        <input\r\n          type=\"date\"\r\n          value={dateFilter}\r\n          onChange={(e) => setDateFilter(e.target.value)}\r\n          className=\"border rounded p-2\"\r\n        />\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8\">\r\n        <div className=\"bg-black p-6 shadow rounded-xl\">\r\n          <h2 className=\"text-xl font-semibold mb-2\">Total des contenus</h2>\r\n          <p className=\"text-4xl font-bold text-indigo-600\">{stats.total}</p>\r\n        </div>\r\n\r\n        <div className=\"bg-black p-6 shadow rounded-xl\">\r\n          <h2 className=\"text-xl font-semibold mb-2\">Contenus par statut</h2>\r\n          {(stats.byStatus ?? []).length > 0 ? (\r\n          <ResponsiveContainer width=\"100%\" height={250}>\r\n            <PieChart>\r\n              <Pie\r\n                dataKey=\"count\"\r\n                data={stats.byStatus}\r\n                nameKey=\"_id\"\r\n                cx=\"50%\"\r\n                cy=\"50%\"\r\n                outerRadius={80}\r\n                label\r\n              >\r\n                {(stats.byStatus ?? []).map((item: { _id: string, count: number }, index: number) => (\r\n                <Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />\r\n                ))}\r\n              </Pie>\r\n              <Tooltip />\r\n              <Legend />\r\n            </PieChart>\r\n          </ResponsiveContainer>\r\n          ) : (\r\n            <p>Aucune donn√©e pour ce statut.</p>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"bg-black p-6 shadow rounded-xl\">\r\n        <h2 className=\"text-xl font-semibold mb-4\">Contenus par r√©seau social</h2>\r\n        <ResponsiveContainer width=\"100%\" height={300}>\r\n          <BarChart data={stats.byPlatform ?? []}>\r\n            <XAxis dataKey=\"_id\" />\r\n            <YAxis />\r\n            <Tooltip />\r\n            <Legend />\r\n            <Bar dataKey=\"count\" fill=\"#8884d8\" />\r\n          </BarChart>\r\n        </ResponsiveContainer>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n\r\n// 'use client';\r\n// import { useAuth } from '../contexts/authProvider';\r\n// import { useEffect } from 'react';\r\n// import { useRouter } from 'next/navigation';\r\n\r\n// export default function DashboardPage() {\r\n//   const { user, loading, logout } = useAuth();\r\n//   const router = useRouter();\r\n\r\n//   useEffect(() => {\r\n//     if (!loading && !user) {\r\n//       router.push('/auth/login');\r\n//     }\r\n//   }, [user, loading]);\r\n\r\n//   if (loading || !user) {\r\n//     return <div>Chargement...</div>;\r\n//   }\r\n  \r\n\r\n//   return (\r\n//     <main className=\"dashboard\">\r\n//       <h1>Tableau de Bord</h1>\r\n//       <p>Bienvenue, {user.username} ({user.email})</p>\r\n//       <p>Tu es connect√© ({user.username})</p>\r\n//       <p>tes infos {JSON.stringify(user)}</p>\r\n//       <button onClick={logout} className=\"logout-btn\">\r\n//         D√©connexion\r\n//       </button>\r\n      \r\n//       {/* Ajoutez ici le contenu de votre dashboard */}\r\n//     </main>\r\n//   );\r\n// }"],"names":[],"mappings":"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","debugId":null}}]
}