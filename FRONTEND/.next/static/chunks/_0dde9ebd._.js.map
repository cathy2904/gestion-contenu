{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/komba/Gestion-contenu/AIBTZ/lib/api.ts"],"sourcesContent":["import { Article } from \"@/type/article\";\r\nimport ArticleForm from \"@/components/ArticleForm\";\r\nimport { ArticleFormData } from \"@/type/article\";\r\n\r\nconst API_BASE_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:3000';\r\n\r\ninterface ApiError {\r\n  message: string;\r\n  status?: number;\r\n}\r\n\r\nexport const api = {\r\n  async fetchArticles(): Promise<Article[]> {\r\n    return this.handleRequest('/articles');\r\n  },\r\n\r\n  async fetchArticle(id: string): Promise<Article> {\r\n    return this.handleRequest(`/articles/${id}`);\r\n  },\r\n\r\n  async createArticle(data: ArticleFormData): Promise<Article> {\r\n    return this.handleRequest('/articles', {\r\n      method: 'POST',\r\n      body: JSON.stringify(data)\r\n    });\r\n  },\r\n\r\n  async updateArticle(id: string, data: ArticleFormData): Promise<Article> {\r\n    return this.handleRequest(`/articles/${id}`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data)\r\n    });\r\n  },\r\n\r\n  async deleteArticle(id: string): Promise<void> {\r\n    return this.handleRequest(`/articles/${id}`, {\r\n      method: 'DELETE'\r\n    });\r\n  },\r\n\r\n   async handleRequest<T>(endpoint: string, options?: RequestInit): Promise<T> {\r\n    try {\r\n      const response = await fetch(`${API_BASE_URL}${endpoint}`, {\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        ...options\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const errorData = await response.json();\r\n        throw {\r\n          message: errorData.message || 'Erreur API',\r\n          status: response.status\r\n        } as ApiError;\r\n      }\r\n\r\n      return await response.json();\r\n    } catch (error) {\r\n      throw {\r\n        message: (error as ApiError).message || 'Erreur réseau',\r\n        status: (error as ApiError).status || 500\r\n      };\r\n    }\r\n  }\r\n};"],"names":[],"mappings":";;;AAIqB;AAArB,MAAM,eAAe,6DAAmC;AAOjD,MAAM,MAAM;IACjB,MAAM;QACJ,OAAO,IAAI,CAAC,aAAa,CAAC;IAC5B;IAEA,MAAM,cAAa,EAAU;QAC3B,OAAO,IAAI,CAAC,aAAa,CAAC,CAAC,UAAU,EAAE,IAAI;IAC7C;IAEA,MAAM,eAAc,IAAqB;QACvC,OAAO,IAAI,CAAC,aAAa,CAAC,aAAa;YACrC,QAAQ;YACR,MAAM,KAAK,SAAS,CAAC;QACvB;IACF;IAEA,MAAM,eAAc,EAAU,EAAE,IAAqB;QACnD,OAAO,IAAI,CAAC,aAAa,CAAC,CAAC,UAAU,EAAE,IAAI,EAAE;YAC3C,QAAQ;YACR,MAAM,KAAK,SAAS,CAAC;QACvB;IACF;IAEA,MAAM,eAAc,EAAU;QAC5B,OAAO,IAAI,CAAC,aAAa,CAAC,CAAC,UAAU,EAAE,IAAI,EAAE;YAC3C,QAAQ;QACV;IACF;IAEC,MAAM,eAAiB,QAAgB,EAAE,OAAqB;QAC7D,IAAI;YACF,MAAM,WAAW,MAAM,MAAM,GAAG,eAAe,UAAU,EAAE;gBACzD,SAAS;oBACP,gBAAgB;gBAClB;gBACA,GAAG,OAAO;YACZ;YAEA,IAAI,CAAC,SAAS,EAAE,EAAE;gBAChB,MAAM,YAAY,MAAM,SAAS,IAAI;gBACrC,MAAM;oBACJ,SAAS,UAAU,OAAO,IAAI;oBAC9B,QAAQ,SAAS,MAAM;gBACzB;YACF;YAEA,OAAO,MAAM,SAAS,IAAI;QAC5B,EAAE,OAAO,OAAO;YACd,MAAM;gBACJ,SAAS,AAAC,MAAmB,OAAO,IAAI;gBACxC,QAAQ,AAAC,MAAmB,MAAM,IAAI;YACxC;QACF;IACF;AACF","debugId":null}},
    {"offset": {"line": 69, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/komba/Gestion-contenu/AIBTZ/components/ArticleForm.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState } from 'react';\r\nimport { ArticleFormData } from '@/type/article';\r\n\r\ninterface ArticleFormProps {\r\n  initialData?: ArticleFormData;\r\n  onSubmit: (data: ArticleFormData) => Promise<void>;\r\n  isSubmitting: boolean;\r\n  error?: string;\r\n}\r\n\r\nexport default function ArticleForm({\r\n  initialData,\r\n  onSubmit,\r\n  isSubmitting,\r\n  error\r\n}: ArticleFormProps) {\r\n  const [formData, setFormData] = useState<ArticleFormData>({\r\n    title: initialData?.title || '',\r\n    content: initialData?.content || '',\r\n    author: initialData?.author || ''\r\n  });\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    await onSubmit(formData);\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n      {error && (\r\n        <div className=\"p-4 mb-4 text-red-700 bg-red-100 rounded-lg\">\r\n          {error}\r\n        </div>\r\n      )}\r\n\r\n      <div>\r\n        <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n          Titre\r\n        </label>\r\n        <input\r\n          type=\"text\"\r\n          value={formData.title}\r\n          onChange={(e) => setFormData({ ...formData, title: e.target.value })}\r\n          className=\"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500\"\r\n          required\r\n        />\r\n      </div>\r\n\r\n      <div>\r\n        <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n          Contenu\r\n        </label>\r\n        <textarea\r\n          value={formData.content}\r\n          onChange={(e) => setFormData({ ...formData, content: e.target.value })}\r\n          className=\"w-full p-2 border rounded-md h-32 focus:ring-2 focus:ring-blue-500\"\r\n          required\r\n        />\r\n      </div>\r\n\r\n      <div>\r\n        <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n          Auteur\r\n        </label>\r\n        <input\r\n          type=\"text\"\r\n          value={formData.author}\r\n          onChange={(e) => setFormData({ ...formData, author: e.target.value })}\r\n          className=\"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500\"\r\n          required\r\n        />\r\n      </div>\r\n\r\n      <button\r\n        type=\"submit\"\r\n        disabled={isSubmitting}\r\n        className={`w-full py-2 px-4 rounded-md text-white ${\r\n          isSubmitting \r\n            ? 'bg-gray-400 cursor-not-allowed' \r\n            : 'bg-blue-600 hover:bg-blue-700'\r\n        }`}\r\n      >\r\n        {isSubmitting ? 'Envoi en cours...' : 'Valider'}\r\n      </button>\r\n    </form>\r\n  );\r\n}"],"names":[],"mappings":";;;;AAEA;;;AAFA;;AAYe,SAAS,YAAY,EAClC,WAAW,EACX,QAAQ,EACR,YAAY,EACZ,KAAK,EACY;;IACjB,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAmB;QACxD,OAAO,aAAa,SAAS;QAC7B,SAAS,aAAa,WAAW;QACjC,QAAQ,aAAa,UAAU;IACjC;IAEA,MAAM,eAAe,OAAO;QAC1B,EAAE,cAAc;QAChB,MAAM,SAAS;IACjB;IAEA,qBACE,6LAAC;QAAK,UAAU;QAAc,WAAU;;YACrC,uBACC,6LAAC;gBAAI,WAAU;0BACZ;;;;;;0BAIL,6LAAC;;kCACC,6LAAC;wBAAM,WAAU;kCAA+C;;;;;;kCAGhE,6LAAC;wBACC,MAAK;wBACL,OAAO,SAAS,KAAK;wBACrB,UAAU,CAAC,IAAM,YAAY;gCAAE,GAAG,QAAQ;gCAAE,OAAO,EAAE,MAAM,CAAC,KAAK;4BAAC;wBAClE,WAAU;wBACV,QAAQ;;;;;;;;;;;;0BAIZ,6LAAC;;kCACC,6LAAC;wBAAM,WAAU;kCAA+C;;;;;;kCAGhE,6LAAC;wBACC,OAAO,SAAS,OAAO;wBACvB,UAAU,CAAC,IAAM,YAAY;gCAAE,GAAG,QAAQ;gCAAE,SAAS,EAAE,MAAM,CAAC,KAAK;4BAAC;wBACpE,WAAU;wBACV,QAAQ;;;;;;;;;;;;0BAIZ,6LAAC;;kCACC,6LAAC;wBAAM,WAAU;kCAA+C;;;;;;kCAGhE,6LAAC;wBACC,MAAK;wBACL,OAAO,SAAS,MAAM;wBACtB,UAAU,CAAC,IAAM,YAAY;gCAAE,GAAG,QAAQ;gCAAE,QAAQ,EAAE,MAAM,CAAC,KAAK;4BAAC;wBACnE,WAAU;wBACV,QAAQ;;;;;;;;;;;;0BAIZ,6LAAC;gBACC,MAAK;gBACL,UAAU;gBACV,WAAW,CAAC,uCAAuC,EACjD,eACI,mCACA,iCACJ;0BAED,eAAe,sBAAsB;;;;;;;;;;;;AAI9C;GA5EwB;KAAA","debugId":null}},
    {"offset": {"line": 220, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/komba/Gestion-contenu/AIBTZ/app/articles/edit/%5Bid%5D/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { useRouter, useParams } from 'next/navigation';\r\nimport { api } from '@/lib/api';\r\nimport ArticleForm from '@/components/ArticleForm';\r\n\r\nexport default function EditArticlePage() {\r\n  const router = useRouter();\r\n  const { id } = useParams();\r\n  const [article, setArticle] = useState<Article | null>(null);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const loadArticle = async () => {\r\n      try {\r\n        const data = await api.fetchArticle(id as string);\r\n        setArticle(data);\r\n      } catch (err) {\r\n        setError('Article non trouvé');\r\n        router.push('/articles');\r\n      }\r\n    };\r\n\r\n    loadArticle();\r\n  }, [id, router]);\r\n\r\n  const handleSubmit = async (formData: ArticleFormData) => {\r\n    setIsSubmitting(true);\r\n    setError(null);\r\n\r\n    try {\r\n      await api.updateArticle(id as string, formData);\r\n      router.push('/articles');\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'Erreur lors de la mise à jour');\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  if (!article) {\r\n    return (\r\n      <div className=\"max-w-2xl mx-auto p-6\">\r\n        <div className=\"animate-pulse space-y-4\">\r\n          <div className=\"h-8 bg-gray-200 rounded w-1/2 mb-6\"></div>\r\n          <div className=\"h-4 bg-gray-200 rounded w-full\"></div>\r\n          <div className=\"h-4 bg-gray-200 rounded w-3/4\"></div>\r\n          <div className=\"h-4 bg-gray-200 rounded w-2/3\"></div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"max-w-2xl mx-auto p-6\">\r\n      <h2 className=\"text-2xl font-bold mb-6\">Modifier l'article</h2>\r\n      <ArticleForm\r\n        initialData={article}\r\n        onSubmit={handleSubmit}\r\n        isSubmitting={isSubmitting}\r\n        error={error || undefined}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n// 'use client'; // Ce composant utilise des hooks, donc il doit être côté client\r\n\r\n// import { useEffect, useState } from 'react';\r\n// import { useRouter, useParams } from 'next/navigation';\r\n\r\n// export default function EditArticlePage() {\r\n//   const router = useRouter();\r\n//   const { id } = useParams();\r\n//   const [formData, setFormData] = useState({\r\n//     title: '',\r\n//     content: '',\r\n//     author: '',\r\n//   });\r\n//   const [isLoading, setIsLoading] = useState(true);\r\n//   const [error, setError] = useState<string | null>(null);\r\n\r\n//   // Récupère les données de l'article à modifier\r\n//   useEffect(() => {\r\n//     const fetchArticle = async () => {\r\n//       try {\r\n//         const res = await fetch(`api/articles/edit/${id}`);\r\n//         if (!res.ok) {\r\n//           throw new Error('Échec de la récupération de l\\'article');\r\n//         }\r\n//         const data = await res.json();\r\n//         if (data) {\r\n//           setFormData({\r\n//             title: data.title || '',\r\n//             content: data.content || '',\r\n//             author: data.author || '',\r\n//           });\r\n//         }\r\n//       } catch (error) {\r\n//         console.error('Erreur lors de la récupération de l\\'article :', error);\r\n//         setError('Erreur lors du chargement de l\\'article');\r\n//       } finally {\r\n//         setIsLoading(false);\r\n//       }\r\n//     };\r\n//     fetchArticle();\r\n//   }, [id]);\r\n\r\n//   // Gère la soumission du formulaire\r\n//   const handleSubmit = async (e: React.FormEvent) => {\r\n//     e.preventDefault();\r\n//     try {\r\n//       const res = await fetch(`api/articles/edit/${id}`, {\r\n//         method: 'PUT',\r\n//         headers: {\r\n//           'Content-Type': 'application/json',\r\n//         },\r\n//         body: JSON.stringify(formData),\r\n//       });\r\n//       if (!res.ok) {\r\n//         throw new Error('Échec de la mise à jour de l\\'article');\r\n//       }\r\n//       router.push('/articles'); // Redirige vers la liste des articles après la mise à jour\r\n//     } catch (error) {\r\n//       console.error('Erreur lors de la mise à jour de l\\'article :', error);\r\n//       setError('Erreur lors de la mise à jour de l\\'article');\r\n//     }\r\n//   };\r\n\r\n//   if (isLoading) {\r\n//     return <div className=\"p-6\"><span>Chargement en cours...</span></div>;\r\n//   }\r\n\r\n//   if (error) {\r\n//     return <div className=\"p-6\"><span className=\"text-red-500\">{error}</span></div>;\r\n//   }\r\n\r\n//   return (\r\n//     <div className=\"p-6\">\r\n//       <h1 className=\"text-2xl font-bold mb-4\">Modifier l'article</h1>\r\n//       <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n//         <div>\r\n//           <label className=\"block text-sm font-medium text-gray-700\">Titre</label>\r\n//           <input\r\n//             type=\"text\"\r\n//             value={formData.title}\r\n//             onChange={(e) => setFormData({ ...formData, title: e.target.value })}\r\n//             className=\"mt-1 block w-full border border-gray-300 rounded-md p-2\"\r\n//           />\r\n//         </div>\r\n//         <div>\r\n//           <label className=\"block text-sm font-medium text-gray-700\">Contenu</label>\r\n//           <textarea\r\n//             value={formData.content}\r\n//             onChange={(e) => setFormData({ ...formData, content: e.target.value })}\r\n//             className=\"mt-1 block w-full border border-gray-300 rounded-md p-2\"\r\n//           />\r\n//         </div>\r\n//         <div>\r\n//           <label className=\"block text-sm font-medium text-gray-700\">Auteur</label>\r\n//           <input\r\n//             type=\"text\"\r\n//             value={formData.author}\r\n//             onChange={(e) => setFormData({ ...formData, author: e.target.value })}\r\n//             className=\"mt-1 block w-full border border-gray-300 rounded-md p-2\"\r\n//           />\r\n//         </div>\r\n//         <button\r\n//           type=\"submit\"\r\n//           className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\"\r\n//         >\r\n//           Enregistrer\r\n//         </button>\r\n//       </form>\r\n//     </div>\r\n//   );\r\n// }"],"names":[],"mappings":"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","debugId":null}}]
}