{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/komba/Gestion-contenu/FRONTEND/app/contexts/authContext.tsx"],"sourcesContent":["// context/AuthContext.tsx\r\n\"use client\";\r\n\r\nimport { createContext, useContext, useState, useEffect, ReactNode } from \"react\";\r\nimport axios from \"axios\";\r\n\r\n// Définir les types\r\ntype User = {\r\n  _id: string;\r\n  username: string;\r\n  email: string;\r\n};\r\n\r\ntype AuthContextType = {\r\n  user: User | null;\r\n  isLoading: boolean;\r\n  login: (email: string, password: string) => Promise<void>;\r\n  register: (username: string, email: string, password: string) => Promise<void>;\r\n  logout: () => Promise<void>;\r\n};\r\n\r\n// Créer le contexte\r\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\r\n\r\n// API URL\r\nconst API_URL = process.env.NEXT_PUBLIC_API_URL || \"http://localhost:3000/api\";\r\n\r\nexport function AuthProvider({ children }: { children: ReactNode }) {\r\n  const [user, setUser] = useState<User | null>(null);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n\r\n  // Vérifier si l'utilisateur est déjà connecté au chargement\r\n  useEffect(() => {\r\n    const checkAuth = async () => {\r\n      try {\r\n        const token = localStorage.getItem(\"token\");\r\n        if (token) {\r\n          axios.defaults.headers.common[\"Authorization\"] = `Bearer ${token}`;\r\n          const response = await axios.get(`${API_URL}/auth/profile`);\r\n          setUser(response.data);\r\n        }\r\n      } catch (error) {\r\n        localStorage.removeItem(\"token\");\r\n        delete axios.defaults.headers.common[\"Authorization\"];\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n\r\n    checkAuth();\r\n  }, []);\r\n\r\n  // Fonction de connexion\r\n  const login = async (email: string, password: string) => {\r\n    try {\r\n      const response = await axios.post(`${API_URL}/auth/login`, {\r\n        email,\r\n        password,\r\n      });\r\n      \r\n      const { access_token, user } = response.data;\r\n      localStorage.setItem(\"token\", access_token);\r\n      axios.defaults.headers.common[\"Authorization\"] = `Bearer ${access_token}`;\r\n      setUser(user);\r\n    } catch (error) {\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  // Fonction d'inscription\r\n  const register = async (username: string, email: string, password: string) => {\r\n    try {\r\n      await axios.post(`${API_URL}/auth/register`, {\r\n        username,\r\n        email,\r\n        password,\r\n      });\r\n    } catch (error) {\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  // Fonction de déconnexion\r\n  const logout = async () => {\r\n    localStorage.removeItem(\"token\");\r\n    delete axios.defaults.headers.common[\"Authorization\"];\r\n    setUser(null);\r\n  };\r\n\r\n  const value = {\r\n    user,\r\n    isLoading,\r\n    login,\r\n    register,\r\n    logout,\r\n  };\r\n\r\n  return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>;\r\n}\r\n\r\n// Hook personnalisé pour utiliser le contexte\r\nexport function useAuth() {\r\n  const context = useContext(AuthContext);\r\n  if (context === undefined) {\r\n    throw new Error(\"useAuth doit être utilisé dans un AuthProvider\");\r\n  }\r\n  return context;\r\n}"],"names":[],"mappings":"AAAA,0BAA0B;;;;;AAyBV;;AAtBhB;AACA;;;AAHA;;;AAoBA,oBAAoB;AACpB,MAAM,4BAAc,CAAA,GAAA,6JAAA,CAAA,gBAAa,AAAD,EAA+B;AAE/D,UAAU;AACV,MAAM,UAAU,gKAAA,CAAA,UAAO,CAAC,GAAG,CAAC,mBAAmB,IAAI;AAE5C,SAAS,aAAa,EAAE,QAAQ,EAA2B;;IAChE,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAe;IAC9C,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAE3C,4DAA4D;IAC5D,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;kCAAE;YACR,MAAM;oDAAY;oBAChB,IAAI;wBACF,MAAM,QAAQ,aAAa,OAAO,CAAC;wBACnC,IAAI,OAAO;4BACT,wIAAA,CAAA,UAAK,CAAC,QAAQ,CAAC,OAAO,CAAC,MAAM,CAAC,gBAAgB,GAAG,CAAC,OAAO,EAAE,OAAO;4BAClE,MAAM,WAAW,MAAM,wIAAA,CAAA,UAAK,CAAC,GAAG,CAAC,GAAG,QAAQ,aAAa,CAAC;4BAC1D,QAAQ,SAAS,IAAI;wBACvB;oBACF,EAAE,OAAO,OAAO;wBACd,aAAa,UAAU,CAAC;wBACxB,OAAO,wIAAA,CAAA,UAAK,CAAC,QAAQ,CAAC,OAAO,CAAC,MAAM,CAAC,gBAAgB;oBACvD,SAAU;wBACR,aAAa;oBACf;gBACF;;YAEA;QACF;iCAAG,EAAE;IAEL,wBAAwB;IACxB,MAAM,QAAQ,OAAO,OAAe;QAClC,IAAI;YACF,MAAM,WAAW,MAAM,wIAAA,CAAA,UAAK,CAAC,IAAI,CAAC,GAAG,QAAQ,WAAW,CAAC,EAAE;gBACzD;gBACA;YACF;YAEA,MAAM,EAAE,YAAY,EAAE,IAAI,EAAE,GAAG,SAAS,IAAI;YAC5C,aAAa,OAAO,CAAC,SAAS;YAC9B,wIAAA,CAAA,UAAK,CAAC,QAAQ,CAAC,OAAO,CAAC,MAAM,CAAC,gBAAgB,GAAG,CAAC,OAAO,EAAE,cAAc;YACzE,QAAQ;QACV,EAAE,OAAO,OAAO;YACd,MAAM;QACR;IACF;IAEA,yBAAyB;IACzB,MAAM,WAAW,OAAO,UAAkB,OAAe;QACvD,IAAI;YACF,MAAM,wIAAA,CAAA,UAAK,CAAC,IAAI,CAAC,GAAG,QAAQ,cAAc,CAAC,EAAE;gBAC3C;gBACA;gBACA;YACF;QACF,EAAE,OAAO,OAAO;YACd,MAAM;QACR;IACF;IAEA,0BAA0B;IAC1B,MAAM,SAAS;QACb,aAAa,UAAU,CAAC;QACxB,OAAO,wIAAA,CAAA,UAAK,CAAC,QAAQ,CAAC,OAAO,CAAC,MAAM,CAAC,gBAAgB;QACrD,QAAQ;IACV;IAEA,MAAM,QAAQ;QACZ;QACA;QACA;QACA;QACA;IACF;IAEA,qBAAO,6LAAC,YAAY,QAAQ;QAAC,OAAO;kBAAQ;;;;;;AAC9C;GAvEgB;KAAA;AA0ET,SAAS;;IACd,MAAM,UAAU,CAAA,GAAA,6JAAA,CAAA,aAAU,AAAD,EAAE;IAC3B,IAAI,YAAY,WAAW;QACzB,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT;IANgB","debugId":null}},
    {"offset": {"line": 123, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/komba/Gestion-contenu/FRONTEND/app/layout.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { AuthProvider } from \"./contexts/authContext\";\r\nimport \"./globals.css\";\r\n\r\nexport default function RootLayout({\r\n  children,\r\n}: {\r\n  children: React.ReactNode;\r\n}) {\r\n  return (\r\n    <html lang=\"fr\">\r\n      <body>\r\n        <AuthProvider>{children}</AuthProvider>\r\n      </body>\r\n    </html>\r\n  );\r\n}\r\n\r\n// const geistSans = localFont({\r\n//   src: \"./fonts/GeistVF.woff\",\r\n//   variable: \"--font-geist-sans\",\r\n//   weight: \"100 900\",\r\n// });\r\n// const geistMono = localFont({\r\n//   src: \"./fonts/GeistMonoVF.woff\",\r\n//   variable: \"--font-geist-mono\",\r\n//   weight: \"100 900\",\r\n// });\r\n\r\n// export const metadata: Metadata = {\r\n//   title: \"Create Next App\",\r\n//   description: \"Generated by create next app\",\r\n// };\r\n\r\n// export default function RootLayout({\r\n//   children,\r\n// }: Readonly<{\r\n//   children: React.ReactNode;\r\n// }>) {\r\n//   return (\r\n//     <html lang=\"en\" suppressHydrationWarning>\r\n//       <body\r\n//         className={`${geistSans.variable} ${geistMono.variable} antialiased bg-[#0e0e0e] text-[#ececec]`}\r\n//       >\r\n//         <Provider>\r\n//           <MobileBar />\r\n//           <Nav />\r\n          \r\n//           <div className=\"flex items-start\">\r\n//             <div>\r\n//               <DashBar />\r\n//               {/* <MobileBar /> */}\r\n//             </div>\r\n//             {children}\r\n//           </div>\r\n          \r\n//         </Provider>\r\n//       </body>\r\n//     </html>\r\n//   );\r\n// }\r\n"],"names":[],"mappings":";;;;AAEA;AAFA;;;;AAKe,SAAS,WAAW,EACjC,QAAQ,EAGT;IACC,qBACE,6LAAC;QAAK,MAAK;kBACT,cAAA,6LAAC;sBACC,cAAA,6LAAC,kIAAA,CAAA,eAAY;0BAAE;;;;;;;;;;;;;;;;AAIvB,EAEA,gCAAgC;CAChC,iCAAiC;CACjC,mCAAmC;CACnC,uBAAuB;CACvB,MAAM;CACN,gCAAgC;CAChC,qCAAqC;CACrC,mCAAmC;CACnC,uBAAuB;CACvB,MAAM;CAEN,sCAAsC;CACtC,8BAA8B;CAC9B,iDAAiD;CACjD,KAAK;CAEL,uCAAuC;CACvC,cAAc;CACd,gBAAgB;CAChB,+BAA+B;CAC/B,QAAQ;CACR,aAAa;CACb,gDAAgD;CAChD,cAAc;CACd,4GAA4G;CAC5G,UAAU;CACV,qBAAqB;CACrB,0BAA0B;CAC1B,oBAAoB;CAEpB,+CAA+C;CAC/C,oBAAoB;CACpB,4BAA4B;CAC5B,sCAAsC;CACtC,qBAAqB;CACrB,yBAAyB;CACzB,mBAAmB;CAEnB,sBAAsB;CACtB,gBAAgB;CAChB,cAAc;CACd,OAAO;CACP,IAAI;KAxDoB","debugId":null}}]
}