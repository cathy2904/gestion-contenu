{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/komba/Gestion-contenu/FRONTEND/components/Principal.tsx"],"sourcesContent":["export default function Principal({titre, children}: {titre:string, children: React.ReactNode}) {\r\n  return (\r\n    <div className=\" w-full md:w-5/6 bg-[#121313] p-3 md:p-6  space-y-4 overflow-hidden h-auto\">\r\n        <h1 className=\"text-3xl font-bold\">{titre} </h1>\r\n        <div className=\"bg-[#121313] h-[90%]\">{children}</div>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAAe,SAAS,UAAU,EAAC,KAAK,EAAE,QAAQ,EAA4C;IAC5F,qBACE,6LAAC;QAAI,WAAU;;0BACX,6LAAC;gBAAG,WAAU;;oBAAsB;oBAAM;;;;;;;0BAC1C,6LAAC;gBAAI,WAAU;0BAAwB;;;;;;;;;;;;AAG/C;KAPwB","debugId":null}},
    {"offset": {"line": 54, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/komba/Gestion-contenu/FRONTEND/app/contenu/page.tsx"],"sourcesContent":["'use client';\r\nimport Principal from \"@/components/Principal\";\r\n\r\nimport { useState } from 'react';\r\nimport OpenAI from 'openai';\r\nimport AnalysisPage from \"../analysis/page\";\r\nimport Link from \"next/link\";\r\n\r\nexport default function ContentPage() {\r\n  const [title, setTitle] = useState('');\r\n  const [generatedContent, setGeneratedContent] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const [saving, setSaving] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const openai = new OpenAI({\r\n    apiKey: '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',\r\n    dangerouslyAllowBrowser: true,\r\n  });\r\n\r\n  // Fonction pour générer un article\r\n  async function handleGenerate() {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n\r\n      // Appel à l'API OpenAI pour générer un article\r\n      const completion = await openai.chat.completions.create({\r\n        messages: [\r\n          { role: 'system', content: 'Vous êtes un rédacteur professionnel.' },\r\n          { role: 'user', content: `Écris un article sur : ${title}` },\r\n        ],\r\n        model: 'gpt-4o',\r\n        max_completion_tokens: 300,\r\n      });\r\n\r\n      const generatedText = completion.choices[0].message.content || '';\r\n      setGeneratedContent(generatedText); // Afficher le contenu généré\r\n    } catch (err) {\r\n      console.error('Erreur lors de la génération du contenu:', err);\r\n      setError(err instanceof Error ? err.message : 'Une erreur est survenue');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  // Fonction pour enregistrer le contenu généré dans MongoDB\r\n  async function handleSave() {\r\n    try {\r\n      setSaving(true);\r\n      setError(null);\r\n\r\n      if (!generatedContent) {\r\n        throw new Error('Aucun contenu généré à enregistrer.');\r\n      }\r\n\r\n      // Envoyer le contenu généré au backend pour enregistrement\r\n      const saveResponse = await fetch('/analyse', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({ title, content: generatedContent }),\r\n      });\r\n\r\n      if (!saveResponse.ok) {\r\n        throw new Error('Erreur lors de l\\'enregistrement du contenu');\r\n      }\r\n\r\n      const data = await saveResponse.json();\r\n      alert('Contenu enregistré avec succès !');\r\n      console.log('Contenu enregistré:', data);\r\n    } catch (err) {\r\n      console.error('Erreur lors de l\\'enregistrement:', err);\r\n      setError(err instanceof Error ? err.message : 'Une erreur est survenue');\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  }\r\n\r\n  // Styles CSS internes\r\n  const styles = {\r\n    container: {\r\n      maxWidth: '800px',\r\n      margin: '0 auto',\r\n      padding: '20px',\r\n      fontFamily: 'Arial, sans-serif',\r\n      backgroundColor: 'dark',\r\n      borderRadius: '8px',\r\n      boxShadow: '0 4px 6px rgba(0, 0, 0, 0.1)',\r\n    },\r\n    title: {\r\n      fontSize: '24px',\r\n      fontWeight: 'bold',\r\n      marginBottom: '20px',\r\n      color: '#333',\r\n    },\r\n    input: {\r\n      width: '100%',\r\n      padding: '10px',\r\n      fontSize: '16px',\r\n      marginBottom: '20px',\r\n      border: '1px solid #ccc',\r\n      borderRadius: '4px',\r\n    },\r\n    button: {\r\n      padding: '10px 20px',\r\n      fontSize: '16px',\r\n      backgroundColor: '#007bff',\r\n      color: '#fff',\r\n      border: 'none',\r\n      borderRadius: '4px',\r\n      cursor: 'pointer',\r\n      marginRight: '10px',\r\n    },\r\n    buttonDisabled: {\r\n      backgroundColor: '#ccc',\r\n      cursor: 'not-allowed',\r\n    },\r\n    error: {\r\n      color: 'red',\r\n      marginBottom: '20px',\r\n    },\r\n    generatedContent: {\r\n      marginTop: '20px',\r\n      padding: '20px',\r\n      backgroundColor: 'dark',\r\n      border: '1px solid #ddd',\r\n      borderRadius: '4px',\r\n      color: 'white',\r\n    },\r\n    generatedContentTitle: {\r\n      fontSize: '20px',\r\n      fontWeight: 'bold',\r\n      marginBottom: '10px',\r\n      color: '#333',\r\n    },\r\n    generatedContentText: {\r\n      fontSize: '16px',\r\n      color: '#FFFFFF',\r\n      lineHeight: '1.6',\r\n    },\r\n  };\r\n\r\n\r\n  return (\r\n<Principal titre=\"Contents\">\r\n      <h1>Content Home</h1>\r\n\r\n      <Link href=\"contenu/analyze/\">\r\n        <button className=\"bg-blue-500 text-white px-6 py-2 rounded-lg hover:bg-blue-600 transition-colors\">\r\n          Aller à la page d'analyse\r\n        </button>\r\n      </Link>\r\n      <div style={styles.container}>\r\n      <h1 style={styles.title}>Générer un article</h1>\r\n      <input\r\n        type=\"text\"\r\n        placeholder=\"Entrez le titre de l'article\"\r\n        value={title}\r\n        onChange={(e) => setTitle(e.target.value)}\r\n        style={styles.input}\r\n      />\r\n      <button\r\n        onClick={handleGenerate}\r\n        disabled={loading}\r\n        style={{ ...styles.button, ...(loading ? styles.buttonDisabled : {}) }}\r\n      >\r\n        {loading ? 'Génération en cours...' : 'Générer'}\r\n      </button>\r\n\r\n      {error && <p style={styles.error}>{error}</p>}\r\n\r\n      {generatedContent && (\r\n        <div style={styles.generatedContent}>\r\n          <h2 style={styles.generatedContentTitle}>Article généré :</h2>\r\n          <p style={styles.generatedContentText}>{generatedContent}</p>\r\n          <button\r\n            onClick={handleSave}\r\n            disabled={saving}\r\n            style={{ ...styles.button, ...(saving ? styles.buttonDisabled : {}) }}\r\n          >\r\n            {saving ? 'Enregistrement en cours...' : 'Enregistrer'}\r\n          </button>\r\n        </div>\r\n      )}\r\n    </div>\r\n\r\n\r\n\r\n    </Principal>  )\r\n}"],"names":[],"mappings":"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","debugId":null}}]
}