{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/komba/Gestion-contenu/AIBTZ/app/articles/edit/%5Bid%5D/page.tsx"],"sourcesContent":["'use client'; // Ce composant utilise des hooks, donc il doit être côté client\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport { useRouter, useParams } from 'next/navigation';\r\n\r\nimport { fetcher } from '@/app/libs'\r\nimport useSWR from 'swr'\r\n\r\n// export default function EditArticlePage() {\r\n//   const router = useRouter();\r\n//   const { id } = useParams(); // Récupère l'ID de l'URL\r\n//   const [formData, setFormData] = useState({\r\n//     title: '',\r\n//     content: '',\r\n//     author: '',\r\n//   });\r\n\r\nexport default function ArticleEdit({params} :{params:{id:number}}) {\r\n  const router = useRouter()\r\n  const {data : article,isLoading, error} = useSWR(`/api/articles/${params.id}`,fetcher)\r\n  const [title, setTitle] =useState<string>('');\r\n  const [content, setContent] = useState<string>('');\r\n  const [author, setAuthor] = useState<string>('');\r\n\r\n  // Récupère les données de l'article à modifier\r\n  useEffect(()=>{\r\n    if(article){\r\n        setTitle(article.result.title)\r\n        setContent(article.result.content)\r\n        setAuthor(article.result.author)\r\n    }\r\n },[article, isLoading])\r\n const updateArticle = async (e: any) => {\r\n   e.preventDefault()\r\n   if (title!=\"\" && content!=\"\" && author!=\"\") {\r\n     const formData = {\r\n         title: title,\r\n         content: content,\r\n         author: author\r\n     }\r\n     const res = await fetch(`/api/articles/${params.id}`, {\r\n       method: 'PUT',\r\n       headers: {\r\n         'Content-Type': 'application/json'\r\n       },\r\n       body: JSON.stringify(formData)\r\n     });\r\n     const content = await res.json();\r\n     if(content.success>0)\r\n     {\r\n       router.push('/articles');\r\n     }\r\n\r\n   }\r\n };\r\n \r\n if(isLoading) return <div><span>Loading...</span></div>\r\n if (!article) return null;\r\n\r\n  return (\r\n    <div className=\"p-6\">\r\n      <h1 className=\"text-2xl font-bold mb-4\">Modifier l'article</h1>\r\n      <form onSubmit={updateArticle} className=\"space-y-4\">\r\n\r\n      <div className='w-full py-2'>\r\n             <label htmlFor=\"\" className='text-sm font-bold py-2 block'>Title</label>\r\n             <input type='text' name='title' className='w-full border-[1px] border-gray-200 p-2 rounded-sm' value={title} onChange={(e:any)=>setTitle(e.target.value)}/>\r\n        </div>\r\n        <div className='w-full py-2'>\r\n             <label htmlFor=\"\" className='text-sm font-bold py-2 block'>Content</label>\r\n             <textarea name='title' className='w-full border-[1px] border-gray-200 p-2 rounded-sm' value={content} onChange={(e:any)=>setAuthor(e.target.value)} />\r\n        </div>\r\n        <div className='w-full py-2'>\r\n             <label htmlFor=\"\" className='text-sm font-bold py-2 block'>Auteur</label>\r\n             <input type='text' name='title' className='w-full border-[1px] border-gray-200 p-2 rounded-sm' value={author} onChange={(e:any)=>setTitle(e.target.value)}/>\r\n        </div>\r\n        \r\n        {/* <div>\r\n          <label className=\"block text-sm font-medium text-gray-700\">Titre</label>\r\n          <input\r\n            type=\"text\"\r\n            value={formData.title}\r\n            onChange={(e) => setFormData({ ...formData, title: e.target.value })}\r\n            className=\"mt-1 block w-full border border-gray-300 rounded-md p-2\"\r\n          />\r\n        </div>\r\n        <div>\r\n          <label className=\"block text-sm font-medium text-gray-700\">Contenu</label>\r\n          <textarea\r\n            value={formData.content}\r\n            onChange={(e) => setFormData({ ...formData, content: e.target.value })}\r\n            className=\"mt-1 block w-full border border-gray-300 rounded-md p-2\"\r\n          />\r\n        </div>\r\n        <div>\r\n          <label className=\"block text-sm font-medium text-gray-700\">Auteur</label>\r\n          <input\r\n            type=\"text\"\r\n            value={formData.author}\r\n            onChange={(e) => setFormData({ ...formData, author: e.target.value })}\r\n            className=\"mt-1 block w-full border border-gray-300 rounded-md p-2\"\r\n          />\r\n        </div> */}\r\n        <button\r\n          type=\"submit\"\r\n          className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\"\r\n        >\r\n          Enregistrer\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":";;;;AAEA;AACA;;;;;;AAGA;;;AANA,cAAc,gEAAgE;;;;;AAiB/D,SAAS,YAAY,EAAC,MAAM,EAAuB;;IAChE,MAAM,SAAS,CAAA,GAAA,qIAAA,CAAA,YAAS,AAAD;IACvB,MAAM,EAAC,MAAO,OAAO,EAAC,SAAS,EAAE,KAAK,EAAC,GAAG,CAAA,GAAA,iKAAA,CAAA,UAAM,AAAD,EAAE,CAAC,cAAc,EAAE,OAAO,EAAE,EAAE,EAAC;IAC9E,MAAM,CAAC,OAAO,SAAS,GAAE,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAU;IAC1C,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAU;IAC/C,MAAM,CAAC,QAAQ,UAAU,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAU;IAE7C,+CAA+C;IAC/C,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;iCAAE;YACR,IAAG,SAAQ;gBACP,SAAS,QAAQ,MAAM,CAAC,KAAK;gBAC7B,WAAW,QAAQ,MAAM,CAAC,OAAO;gBACjC,UAAU,QAAQ,MAAM,CAAC,MAAM;YACnC;QACH;gCAAE;QAAC;QAAS;KAAU;IACtB,MAAM,gBAAgB,OAAO;QAC3B,EAAE,cAAc;QAChB,IAAI,SAAO,MAAM,WAAS,MAAM,UAAQ,IAAI;YAC1C,MAAM,WAAW;gBACb,OAAO;gBACP,SAAS;gBACT,QAAQ;YACZ;YACA,MAAM,MAAM,MAAM,MAAM,CAAC,cAAc,EAAE,OAAO,EAAE,EAAE,EAAE;gBACpD,QAAQ;gBACR,SAAS;oBACP,gBAAgB;gBAClB;gBACA,MAAM,KAAK,SAAS,CAAC;YACvB;YACA,MAAM,UAAU,MAAM,IAAI,IAAI;YAC9B,IAAG,QAAQ,OAAO,GAAC,GACnB;gBACE,OAAO,IAAI,CAAC;YACd;QAEF;IACF;IAEA,IAAG,WAAW,qBAAO,6LAAC;kBAAI,cAAA,6LAAC;sBAAK;;;;;;;;;;;IAChC,IAAI,CAAC,SAAS,OAAO;IAEpB,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAG,WAAU;0BAA0B;;;;;;0BACxC,6LAAC;gBAAK,UAAU;gBAAe,WAAU;;kCAEzC,6LAAC;wBAAI,WAAU;;0CACR,6LAAC;gCAAM,SAAQ;gCAAG,WAAU;0CAA+B;;;;;;0CAC3D,6LAAC;gCAAM,MAAK;gCAAO,MAAK;gCAAQ,WAAU;gCAAqD,OAAO;gCAAO,UAAU,CAAC,IAAQ,SAAS,EAAE,MAAM,CAAC,KAAK;;;;;;;;;;;;kCAE5J,6LAAC;wBAAI,WAAU;;0CACV,6LAAC;gCAAM,SAAQ;gCAAG,WAAU;0CAA+B;;;;;;0CAC3D,6LAAC;gCAAS,MAAK;gCAAQ,WAAU;gCAAqD,OAAO;gCAAS,UAAU,CAAC,IAAQ,UAAU,EAAE,MAAM,CAAC,KAAK;;;;;;;;;;;;kCAEtJ,6LAAC;wBAAI,WAAU;;0CACV,6LAAC;gCAAM,SAAQ;gCAAG,WAAU;0CAA+B;;;;;;0CAC3D,6LAAC;gCAAM,MAAK;gCAAO,MAAK;gCAAQ,WAAU;gCAAqD,OAAO;gCAAQ,UAAU,CAAC,IAAQ,SAAS,EAAE,MAAM,CAAC,KAAK;;;;;;;;;;;;kCA6B7J,6LAAC;wBACC,MAAK;wBACL,WAAU;kCACX;;;;;;;;;;;;;;;;;;AAMT;GA/FwB;;QACP,qIAAA,CAAA,YAAS;QACkB,iKAAA,CAAA,UAAM;;;KAF1B"}},
    {"offset": {"line": 216, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}