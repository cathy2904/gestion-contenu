{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/komba/Gestion-contenu/FRONTEND/app/post/page.tsx"],"sourcesContent":["// Date: 2025-03-26\n'use client';\nimport { useState, useEffect } from 'react';\nimport Link from 'next/link';\nimport { getPosts, deletePost } from '../../services/api';\nimport PostTable from '../../components/PostTable';\n\nexport default function PostsPage() {\n  const [posts, setPosts] = useState<any[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  const fetchPosts = async () => {\n    try {\n      setIsLoading(true);\n      const response = await getPosts();\n      setPosts(response.data);\n    } catch (err) {\n      setError('Erreur lors du chargement des posts');\n      console.error(err);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleDelete = async (id: string) => {\n    try {\n      await deletePost(id);\n      setPosts(posts.filter(post => post._id !== id));\n    } catch (err) {\n      setError('Erreur lors de la suppression du post');\n      console.error(err);\n    }\n  };\n\n  useEffect(() => {\n    fetchPosts();\n  }, []);\n\n  if (isLoading) {\n    return (\n      <div className=\"flex justify-center items-center h-64\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500\"></div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative\" role=\"alert\">\n        <strong className=\"font-bold\">Erreur ! </strong>\n        <span className=\"block sm:inline\">{error}</span>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"container mx-auto px-4 py-8\">\n      <div className=\"flex justify-between items-center mb-8\">\n        <h1 className=\"text-3xl font-bold text-gray-800\">Liste des Posts</h1>\n        <Link \n          href=\"/posts/create\"\n          className=\"bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-4 rounded transition duration-300\"\n        >\n          Créer un nouveau post\n        </Link>\n      </div>\n\n      {posts.length === 0 ? (\n        <div className=\"bg-white p-8 rounded-lg shadow text-center\">\n          <p className=\"text-gray-500\">Aucun post disponible</p>\n          <Link \n            href=\"/posts/create\"\n            className=\"inline-block mt-4 text-blue-600 hover:text-blue-800\"\n          >\n            Créer votre premier post\n          </Link>\n        </div>\n      ) : (\n        <PostTable posts={posts} onDelete={handleDelete} />\n      )}\n    </div>\n  );\n}\n\n\n// \"use client\";\n// import React,{useEffect, useState} from \"react\";\n// import useSWR from \"swr\";\n// import Post from \"../components/Post\";\n// import { PostModel } from \"../types\";\n// import Link from \"next/link\";\n// import { fetcher } from \"../libs\";\n// export default function Posts() {\n//   const [posts,setPosts] = useState<PostModel[]>([]);\n//   const { data, error, isLoading } = useSWR<any>(`/api/posts`, fetcher);\n//   useEffect(() => {\n//     const fetchPosts = async () => {\n//       try {\n//         console.log('Début du fetch...');\n//         const response = await fetch('/api/posts');\n//         console.log('Réponse reçue:', response);\n        \n//         const data = await response.json();\n//         console.log('Données reçues:', data);\n        \n//         setPosts(data);\n//       } catch (error) {\n//         console.error('Erreur complète:', error);\n//       }\n//     };\n//     fetchPosts();\n//   }, []);\n\n\n//   let delete_Post : PostModel['deletePost']= async (id:number) => {\n//     const res = await fetch(`/api/posts/${id}`, {\n//       method: 'DELETE',\n//       headers: {\n//         'Content-Type': 'application/json'\n//       },\n//     });\n//     const content = await res.json();\n//     if(content.success>0)\n//     {\n       \n//       setPosts(posts?.filter((post:PostModel)=>{  return post.id !== id  }));\n//     }\n//   }\n//   return (\n//     <div className=\"w-full max-w-7xl m-auto\">\n//       <div>\n//     <Link href={`/post/create`} className=\"bg-green-500 p-2 inline-block text-white\">Créer</Link>\n\n//     </div>\n//       <table className=\"w-full border-collapse border border-slate-400\">\n//         {/* <caption className=\"caption-top py-5 font-bold text-green-500 text-2xl\">\n//           List Posts - Counter :\n//           <span className=\"text-red-500 font-bold\">{ posts?.length}</span>\n//         </caption> */}\n    \n//         <thead>\n//           <tr className=\"text-center\">\n            \n//             <th className=\"border border-slate-300\">Title</th>\n//             <th className=\"border border-slate-300\">contenu</th>\n//             <th className=\"border border-slate-300\">auteur</th>\n//             <th className=\"border border-slate-300\">Modify</th>\n//           </tr>\n//         </thead>\n//         <tbody>\n//            {/* <tr>\n//               <td colSpan={5}>\n//                  <Link href={`/post/create`} className=\"bg-green-500 p-2 inline-block text-white\">Créer</Link>\n//               </td>\n//            </tr> */}\n//            {\n//               posts && posts.map((item : PostModel)=><Post key={item.id} {...item} deletePost = {delete_Post} />)\n//            }\n\n//             {}\n//         </tbody>\n//       </table>\n//     </div>\n//   );\n  \n// }\n"],"names":[],"mappings":"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","debugId":null}}]
}