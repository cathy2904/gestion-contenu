{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 5, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/komba/Gestion-contenu/FRONTEND/app/connect/page.tsx"],"sourcesContent":["\r\n\r\n\r\n// 'use client';\r\n\r\n// import { useEffect, useState } from 'react';\r\n\r\n// export default function ConnectSocial() {\r\n//   const [status, setStatus] = useState({\r\n//     facebook: false,\r\n//     instagram: false,\r\n//     linkedin: false,\r\n//   });\r\n\r\n//   useEffect(() => {\r\n//     const fetchStatus = async () => {\r\n//       try {\r\n//         const res = await fetch(`${process.env.NEXT_PUBLIC_API_URL}/api/auth/social-status`, {\r\n//           credentials: 'include',\r\n//         });\r\n//         if (res.ok) {\r\n//           const data = await res.json();\r\n//           setStatus(data);\r\n//         }\r\n//       } catch (err) {\r\n//         console.error('Erreur status:', err);\r\n//       }\r\n//     };\r\n//     fetchStatus();\r\n//   }, []);\r\n\r\n//   const connect = (platform: string) => {\r\n//     window.location.href = `${process.env.NEXT_PUBLIC_API_URL}/api/auth/${platform}`;\r\n//   };\r\n\r\n//   return (\r\n//     <div className=\"p-8 space-y-4\">\r\n//       <h2 className=\"text-2xl font-bold mb-4\">Connexion R√©seaux Sociaux</h2>\r\n//       {['facebook', 'instagram', 'linkedin'].map((platform) => (\r\n//         <div key={platform} className=\"flex items-center justify-between\">\r\n//           <span className=\"capitalize\">{platform}</span>\r\n//           {status[platform as keyof typeof status] ? (\r\n//             <span className=\"text-green-600\">Connect√©</span>\r\n//           ) : (\r\n//             <button\r\n//               onClick={() => connect(platform)}\r\n//               className=\"px-4 py-1 bg-blue-600 text-white rounded\"\r\n//             >\r\n//               Connecter\r\n//             </button>\r\n//           )}\r\n//         </div>\r\n//       ))}\r\n//     </div>\r\n//   );\r\n// }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\n\r\ninterface SocialStatus {\r\n  facebook: boolean;\r\n  instagram: boolean;\r\n  linkedin: boolean;\r\n  displayNames: {\r\n    facebook: string | null;\r\n    instagram: string | null;\r\n    linkedin: string | null;\r\n  };\r\n}\r\n\r\nexport default function ConnectSocial() {\r\n  const [status, setStatus] = useState<SocialStatus>({\r\n    facebook: false,\r\n    instagram: false,\r\n    linkedin: false,\r\n    displayNames: {\r\n      facebook: null,\r\n      instagram: null,\r\n      linkedin: null,\r\n    },\r\n  });\r\n\r\n  // üîÅ R√©cup√©ration du statut de connexion des r√©seaux\r\n  const fetchStatus = async () => {\r\n    try {\r\n      const res = await fetch(`${process.env.NEXT_PUBLIC_API_URL}/api/auth/social-status`, {\r\n        credentials: 'include',\r\n      });\r\n      if (res.ok) {\r\n        const data = await res.json();\r\n        setStatus(data);\r\n      }\r\n    } catch (err) {\r\n      console.error('Erreur lors de la r√©cup√©ration du statut social:', err);\r\n    }\r\n  };\r\n\r\n  // üîó Redirection vers la page d'auth du r√©seau\r\n  const connect = (platform: string) => {\r\n    window.location.href = `${process.env.NEXT_PUBLIC_API_URL}/api/auth/${platform}`;\r\n  };\r\n\r\n  // ‚ùå D√©connexion du r√©seau\r\n  const disconnect = async (platform: string) => {\r\n    try {\r\n      const res = await fetch(\r\n        `${process.env.NEXT_PUBLIC_API_URL}/api/auth/disconnect/${platform}`,\r\n        {\r\n          method: 'GET',\r\n          credentials: 'include',\r\n        }\r\n      );\r\n      if (res.ok) {\r\n        fetchStatus();\r\n      }\r\n    } catch (err) {\r\n      console.error(`Erreur lors de la d√©connexion de ${platform}:`, err);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchStatus();\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"p-8 space-y-6 max-w-xl mx-auto\">\r\n      <h2 className=\"text-2xl font-bold mb-4\">Connexion aux R√©seaux Sociaux</h2>\r\n      {['facebook', 'instagram', 'linkedin'].map((platform) => {\r\n        const isConnected = status[platform as keyof typeof status];\r\n        const displayName = status.displayNames[platform as keyof typeof status.displayNames];\r\n\r\n        return (\r\n          <div\r\n            key={platform}\r\n            className=\"flex items-center justify-between border-b pb-3 pt-2\"\r\n          >\r\n            <div>\r\n              <span className=\"capitalize font-medium\">{platform}</span>\r\n              {isConnected && (\r\n                <div className=\"text-sm text-gray-500\">\r\n                  Connect√© en tant que <span className=\"font-semibold\">{displayName ?? 'Utilisateur'}</span>\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            {isConnected ? (\r\n              <button\r\n                onClick={() => disconnect(platform)}\r\n                className=\"px-4 py-1 bg-red-600 text-white rounded hover:bg-red-700\"\r\n              >\r\n                D√©connecter\r\n              </button>\r\n            ) : (\r\n              <button\r\n                onClick={() => connect(platform)}\r\n                className=\"px-4 py-1 bg-blue-600 text-white rounded hover:bg-blue-700\"\r\n              >\r\n                Connecter\r\n              </button>\r\n            )}\r\n          </div>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"AAGA,gBAAgB;AAEhB,+CAA+C;AAE/C,4CAA4C;AAC5C,2CAA2C;AAC3C,uBAAuB;AACvB,wBAAwB;AACxB,uBAAuB;AACvB,QAAQ;AAER,sBAAsB;AACtB,wCAAwC;AACxC,cAAc;AACd,iGAAiG;AACjG,oCAAoC;AACpC,cAAc;AACd,wBAAwB;AACxB,2CAA2C;AAC3C,6BAA6B;AAC7B,YAAY;AACZ,wBAAwB;AACxB,gDAAgD;AAChD,UAAU;AACV,SAAS;AACT,qBAAqB;AACrB,YAAY;AAEZ,4CAA4C;AAC5C,wFAAwF;AACxF,OAAO;AAEP,aAAa;AACb,sCAAsC;AACtC,+EAA+E;AAC/E,mEAAmE;AACnE,6EAA6E;AAC7E,2DAA2D;AAC3D,yDAAyD;AACzD,+DAA+D;AAC/D,kBAAkB;AAClB,sBAAsB;AACtB,kDAAkD;AAClD,qEAAqE;AACrE,gBAAgB;AAChB,0BAA0B;AAC1B,wBAAwB;AACxB,eAAe;AACf,iBAAiB;AACjB,YAAY;AACZ,aAAa;AACb,OAAO;AACP,IAAI;;;;;AAWJ;AAFA;;;AAee,SAAS;IACtB,MAAM,CAAC,QAAQ,UAAU,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAgB;QACjD,UAAU;QACV,WAAW;QACX,UAAU;QACV,cAAc;YACZ,UAAU;YACV,WAAW;YACX,UAAU;QACZ;IACF;IAEA,qDAAqD;IACrD,MAAM,cAAc;QAClB,IAAI;YACF,MAAM,MAAM,MAAM,MAAM,gFAAmC,uBAAuB,CAAC,EAAE;gBACnF,aAAa;YACf;YACA,IAAI,IAAI,EAAE,EAAE;gBACV,MAAM,OAAO,MAAM,IAAI,IAAI;gBAC3B,UAAU;YACZ;QACF,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,oDAAoD;QACpE;IACF;IAEA,+CAA+C;IAC/C,MAAM,UAAU,CAAC;QACf,OAAO,QAAQ,CAAC,IAAI,GAAG,8EAAmC,UAAU,EAAE,UAAU;IAClF;IAEA,0BAA0B;IAC1B,MAAM,aAAa,OAAO;QACxB,IAAI;YACF,MAAM,MAAM,MAAM,MAChB,gFAAmC,qBAAqB,EAAE,UAAU,EACpE;gBACE,QAAQ;gBACR,aAAa;YACf;YAEF,IAAI,IAAI,EAAE,EAAE;gBACV;YACF;QACF,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,CAAC,iCAAiC,EAAE,SAAS,CAAC,CAAC,EAAE;QACjE;IACF;IAEA,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR;IACF,GAAG,EAAE;IAEL,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAG,WAAU;0BAA0B;;;;;;YACvC;gBAAC;gBAAY;gBAAa;aAAW,CAAC,GAAG,CAAC,CAAC;gBAC1C,MAAM,cAAc,MAAM,CAAC,SAAgC;gBAC3D,MAAM,cAAc,OAAO,YAAY,CAAC,SAA6C;gBAErF,qBACE,8OAAC;oBAEC,WAAU;;sCAEV,8OAAC;;8CACC,8OAAC;oCAAK,WAAU;8CAA0B;;;;;;gCACzC,6BACC,8OAAC;oCAAI,WAAU;;wCAAwB;sDAChB,8OAAC;4CAAK,WAAU;sDAAiB,eAAe;;;;;;;;;;;;;;;;;;wBAK1E,4BACC,8OAAC;4BACC,SAAS,IAAM,WAAW;4BAC1B,WAAU;sCACX;;;;;iDAID,8OAAC;4BACC,SAAS,IAAM,QAAQ;4BACvB,WAAU;sCACX;;;;;;;mBAvBE;;;;;YA6BX;;;;;;;AAGN","debugId":null}}]
}