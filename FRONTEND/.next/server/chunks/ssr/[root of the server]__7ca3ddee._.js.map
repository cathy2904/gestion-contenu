{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 111, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/komba/Gestion-contenu/FRONTEND/app/connect/page.tsx"],"sourcesContent":["// 'use client';\r\n\r\n// import { useEffect, useState } from 'react';\r\n// import axios from 'axios';\r\n\r\n// type Account = { displayName: string };\r\n// type Social = { facebook?: Account; instagram?: Account; linkedin?: Account };\r\n\r\n// export default function ConnectSocialPage() {\r\n//   const [social, setSocial] = useState<Social>({});\r\n\r\n//   const fetchSocial = async () => {\r\n//     const res = await axios.get('/social/me', { withCredentials: true });\r\n//     setSocial(res.data.socialAccounts || {});\r\n//   };\r\n\r\n//   const connect = (provider: string) => (window.location.href = `/auth/${provider}`);\r\n//   const disconnect = async (provider: string) => {\r\n//     await axios.delete(`/social/${provider}`, { withCredentials: true });\r\n//     fetchSocial();\r\n//   };\r\n\r\n//   useEffect(() => { fetchSocial(); }, []);\r\n\r\n//   return (\r\n//     <div className=\"p-6 space-y-4 max-w-md mx-auto\">\r\n//       <h2 className=\"text-xl font-bold\">Gérer mes connexions</h2>\r\n//       {['facebook', 'instagram', 'linkedin'].map((prov) => (\r\n//         <div key={prov} className=\"flex justify-between items-center border p-4 rounded\">\r\n//           <span className=\"capitalize\">{prov}</span>\r\n//           {social[prov] ? (\r\n//             <>\r\n//               <span>Connecté ({social[prov]?.displayName})</span>\r\n//               <button className=\"text-red-500\" onClick={() => disconnect(prov)}>Déconnecter</button>\r\n//             </>\r\n//           ) : (\r\n//             <button className=\"bg-blue-600 text-white px-3 py-1 rounded\" onClick={() => connect(prov)}>Connecter</button>\r\n//           )}\r\n//         </div>\r\n//       ))}\r\n//     </div>\r\n//   );\r\n// }\r\n\r\n\r\n// 'use client'\r\n\r\n// import { useEffect, useState } from 'react'\r\n\r\n// export default function ConnectSocial() {\r\n//   const [status, setStatus] = useState({\r\n//     facebook: false,\r\n//     instagram: false,\r\n//     linkedin: false,\r\n//   });\r\n\r\n//   useEffect(() => {\r\n//     const fetchStatus = async () => {\r\n//       const res = await fetch(`${process.env.NEXT_PUBLIC_API_URL}/api/auth/social-status`, {\r\n//         credentials: 'include',\r\n//       });\r\n//       if (res.ok) {\r\n//         const data = await res.json();\r\n//         setStatus(data);\r\n//       }\r\n//     };\r\n//     fetchStatus();\r\n//   }, []);\r\n\r\n//   const connect = (platform: string) => {\r\n//     window.location.href = `${process.env.NEXT_PUBLIC_API_URL}/api/auth/${platform}`;\r\n//   };\r\n\r\n//   return (\r\n//     <div className=\"space-y-4\">\r\n//       {['facebook', 'instagram', 'linkedin'].map((platform) => (\r\n//         <div key={platform} className=\"flex items-center justify-between\">\r\n//           <span className=\"capitalize\">{platform}</span>\r\n//           {status[platform as keyof typeof status] ? (\r\n//             <span className=\"text-green-600\">Connecté</span>\r\n//           ) : (\r\n//             <button\r\n//               onClick={() => connect(platform)}\r\n//               className=\"px-4 py-1 bg-blue-600 text-white rounded\"\r\n//             >\r\n//               Connecter\r\n//             </button>\r\n//           )}\r\n//         </div>\r\n//       ))}\r\n//     </div>\r\n//   );\r\n// }\r\n\r\n\r\n'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\n\r\nexport default function ConnectSocial() {\r\n  const [status, setStatus] = useState({\r\n    facebook: false,\r\n    instagram: false,\r\n    linkedin: false,\r\n    displayNames: {\r\n      facebook: null,\r\n      instagram: null,\r\n      linkedin: null,\r\n    },\r\n  });\r\n\r\n  const fetchStatus = async () => {\r\n    const res = await axios.get('http://localhost:3000/auth/social-status', { withCredentials: true });\r\n    setStatus(res.data);\r\n  };\r\n\r\n  const disconnect = async (platform: string) => {\r\n    await axios.get(`http://localhost:3000/auth/disconnect/${platform}`, { withCredentials: true });\r\n    fetchStatus();\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchStatus();\r\n  }, []);\r\n\r\n  return (\r\n    <div>\r\n      <h2>Réseaux connectés :</h2>\r\n\r\n      {['facebook', 'instagram', 'linkedin'].map((platform) => (\r\n        <div key={platform}>\r\n          {status[platform] ? (\r\n            <div>\r\n              ✅ {platform} connecté — {status.displayNames[platform]}\r\n              <button onClick={() => disconnect(platform)}>Déconnecter</button>\r\n            </div>\r\n          ) : (\r\n            <a href={`http://localhost:3000/auth/${platform}`}>\r\n              <button>Connecter {platform}</button>\r\n            </a>\r\n          )}\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":"AAAA,gBAAgB;AAEhB,+CAA+C;AAC/C,6BAA6B;AAE7B,0CAA0C;AAC1C,iFAAiF;AAEjF,gDAAgD;AAChD,sDAAsD;AAEtD,sCAAsC;AACtC,4EAA4E;AAC5E,gDAAgD;AAChD,OAAO;AAEP,wFAAwF;AACxF,qDAAqD;AACrD,4EAA4E;AAC5E,qBAAqB;AACrB,OAAO;AAEP,6CAA6C;AAE7C,aAAa;AACb,uDAAuD;AACvD,oEAAoE;AACpE,+DAA+D;AAC/D,4FAA4F;AAC5F,uDAAuD;AACvD,8BAA8B;AAC9B,iBAAiB;AACjB,oEAAoE;AACpE,uGAAuG;AACvG,kBAAkB;AAClB,kBAAkB;AAClB,4HAA4H;AAC5H,eAAe;AACf,iBAAiB;AACjB,YAAY;AACZ,aAAa;AACb,OAAO;AACP,IAAI;AAGJ,eAAe;AAEf,8CAA8C;AAE9C,4CAA4C;AAC5C,2CAA2C;AAC3C,uBAAuB;AACvB,wBAAwB;AACxB,uBAAuB;AACvB,QAAQ;AAER,sBAAsB;AACtB,wCAAwC;AACxC,+FAA+F;AAC/F,kCAAkC;AAClC,YAAY;AACZ,sBAAsB;AACtB,yCAAyC;AACzC,2BAA2B;AAC3B,UAAU;AACV,SAAS;AACT,qBAAqB;AACrB,YAAY;AAEZ,4CAA4C;AAC5C,wFAAwF;AACxF,OAAO;AAEP,aAAa;AACb,kCAAkC;AAClC,mEAAmE;AACnE,6EAA6E;AAC7E,2DAA2D;AAC3D,yDAAyD;AACzD,+DAA+D;AAC/D,kBAAkB;AAClB,sBAAsB;AACtB,kDAAkD;AAClD,qEAAqE;AACrE,gBAAgB;AAChB,0BAA0B;AAC1B,wBAAwB;AACxB,eAAe;AACf,iBAAiB;AACjB,YAAY;AACZ,aAAa;AACb,OAAO;AACP,IAAI;;;;;AAKJ;AACA;AAHA;;;;AAKe,SAAS;IACtB,MAAM,CAAC,QAAQ,UAAU,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;QACnC,UAAU;QACV,WAAW;QACX,UAAU;QACV,cAAc;YACZ,UAAU;YACV,WAAW;YACX,UAAU;QACZ;IACF;IAEA,MAAM,cAAc;QAClB,MAAM,MAAM,MAAM,qIAAA,CAAA,UAAK,CAAC,GAAG,CAAC,4CAA4C;YAAE,iBAAiB;QAAK;QAChG,UAAU,IAAI,IAAI;IACpB;IAEA,MAAM,aAAa,OAAO;QACxB,MAAM,qIAAA,CAAA,UAAK,CAAC,GAAG,CAAC,CAAC,sCAAsC,EAAE,UAAU,EAAE;YAAE,iBAAiB;QAAK;QAC7F;IACF;IAEA,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR;IACF,GAAG,EAAE;IAEL,qBACE,8OAAC;;0BACC,8OAAC;0BAAG;;;;;;YAEH;gBAAC;gBAAY;gBAAa;aAAW,CAAC,GAAG,CAAC,CAAC,yBAC1C,8OAAC;8BACE,MAAM,CAAC,SAAS,iBACf,8OAAC;;4BAAI;4BACA;4BAAS;4BAAa,OAAO,YAAY,CAAC,SAAS;0CACtD,8OAAC;gCAAO,SAAS,IAAM,WAAW;0CAAW;;;;;;;;;;;6CAG/C,8OAAC;wBAAE,MAAM,CAAC,2BAA2B,EAAE,UAAU;kCAC/C,cAAA,8OAAC;;gCAAO;gCAAW;;;;;;;;;;;;mBARf;;;;;;;;;;;AAelB","debugId":null}}]
}