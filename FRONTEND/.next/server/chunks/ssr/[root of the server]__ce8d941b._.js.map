{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 111, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/komba/Gestion-contenu/FRONTEND/app/content/create/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport axios from 'axios';\r\n\r\nconst CreateContentPage = () => {\r\n  const router = useRouter();\r\n\r\n  const [title, setTitle] = useState('');\r\n  const [tone, setTone] = useState('professional');\r\n  const [length, setLength] = useState('medium');\r\n  const [provider, setProvider] = useState('OPENAI');\r\n  const [loading, setLoading] = useState(false);\r\n  const [generatedText, setGeneratedText] = useState('');\r\n  const [isGenerated, setIsGenerated] = useState(false);\r\n\r\n  const getWordCount = () => {\r\n    switch (length) {\r\n      case 'short': return 300;\r\n      case 'medium': return 500;\r\n      case 'long': return 800;\r\n      default: return 500;\r\n    }\r\n  };\r\n\r\n  const getToneInstruction = () => {\r\n    switch (tone) {\r\n      case 'professional': return 'sur un ton professionnel';\r\n      case 'casual': return 'sur un ton décontracté et accessible';\r\n      case 'enthusiastic': return 'sur un ton enthousiaste et engageant';\r\n      default: return '';\r\n    }\r\n  };\r\n\r\n  const handleGenerate = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    setGeneratedText('');\r\n    setIsGenerated(false);\r\n\r\n    const data = {\r\n      title,\r\n      style: getToneInstruction(),\r\n      length: getWordCount(),\r\n      provider,\r\n    };\r\n\r\n    try {\r\n      const res = await axios.post(`https://api.openai.com/v1/chat/completions`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(data),\r\n      });\r\n\r\n      if (res) {\r\n        const result = await res.json();\r\n        setGeneratedText(result.generatedContent || '');\r\n        setIsGenerated(true);\r\n      } else {\r\n        console.error('❌ Erreur lors de la génération');\r\n      }\r\n    } catch (error) {\r\n      console.error('❌ Erreur serveur', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    const data = {\r\n      title,\r\n      content: generatedText,\r\n      style: getToneInstruction(),\r\n      length: getWordCount(),\r\n      provider,\r\n    };\r\n\r\n    try {\r\n      const res = await fetch(`${process.env.NEXT_API_URL}/content`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(data),\r\n      });\r\n\r\n      if (res.ok) {\r\n        console.log('✅ Contenu enregistré');\r\n        router.push('/content');\r\n      } else {\r\n        console.error('❌ Échec de l’enregistrement');\r\n      }\r\n    } catch (error) {\r\n      console.error('❌ Erreur serveur', error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"max-w-xl mx-auto p-4\">\r\n      <h1 className=\"text-2xl font-bold mb-6\">Créer un contenu IA</h1>\r\n      <form onSubmit={handleGenerate} className=\"space-y-4\">\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Titre du contenu\"\r\n          value={title}\r\n          onChange={(e) => setTitle(e.target.value)}\r\n          className=\"w-full p-2 border rounded\"\r\n          required\r\n        />\r\n\r\n        <select\r\n          value={tone}\r\n          onChange={(e) => setTone(e.target.value)}\r\n          className=\"w-full p-2 border rounded\"\r\n        >\r\n          <option value=\"professional\">Professionnel</option>\r\n          <option value=\"casual\">Décontracté</option>\r\n          <option value=\"enthusiastic\">Enthousiaste</option>\r\n        </select>\r\n\r\n        <select\r\n          value={length}\r\n          onChange={(e) => setLength(e.target.value)}\r\n          className=\"w-full p-2 border rounded\"\r\n        >\r\n          <option value=\"short\">Court (300 mots)</option>\r\n          <option value=\"medium\">Moyen (500 mots)</option>\r\n          <option value=\"long\">Long (800 mots)</option>\r\n        </select>\r\n\r\n        <select\r\n          value={provider}\r\n          onChange={(e) => setProvider(e.target.value)}\r\n          className=\"w-full p-2 border rounded\"\r\n        >\r\n          <option value=\"OPENAI\">OpenAI</option>\r\n          <option value=\"DEEPSEEK\">DeepSeek</option>\r\n          <option value=\"CLAUDEAI\">Claude AI</option>\r\n        </select>\r\n\r\n        <button\r\n          type=\"submit\"\r\n          disabled={loading}\r\n          className=\"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700\"\r\n        >\r\n          {loading ? 'Génération en cours...' : 'Générer'}\r\n        </button>\r\n      </form>\r\n\r\n      {isGenerated && (\r\n        <div className=\"mt-6\">\r\n          <h2 className=\"text-xl font-semibold mb-2\">Contenu généré</h2>\r\n          <div className=\"bg-gray-100 p-4 rounded mb-4 whitespace-pre-wrap\">{generatedText}</div>\r\n          <button\r\n            onClick={handleSave}\r\n            className=\"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700\"\r\n          >\r\n            Enregistrer\r\n          </button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CreateContentPage;\r\n"],"names":[],"mappings":"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","debugId":null}}]
}