{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/komba/Gestion-contenu/FRONTEND/app/upload/claude/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { useState } from 'react';\r\n\r\nexport default function HomePage() {\r\n  const [file, setFile] = useState<File | null>(null);\r\n  const [title, setTitle] = useState('');\r\n  const [provider, setProvider] = useState<'claude' | 'openai'>('claude');\r\n  const [loading, setLoading] = useState(false);\r\n  const [result, setResult] = useState<any>(null);\r\n  const [error, setError] = useState('');\r\n\r\n  const handleSubmit = async () => {\r\n    if (!file || !title) {\r\n      alert('Veuillez remplir tous les champs');\r\n      return;\r\n    }\r\n\r\n    const formData = new FormData();\r\n    formData.append('file', file);\r\n    formData.append('title', title);\r\n\r\n    setLoading(true);\r\n    setResult(null);\r\n    setError('');\r\n\r\n    try {\r\n      const res = await fetch(`http://localhost:3000/api/documents/upload?provider=${provider}`, {\r\n        method: 'POST',\r\n        body: formData,\r\n      });\r\n\r\n      const data = await res.json();\r\n\r\n      if (data.error) {\r\n        setError(data.error);\r\n      } else {\r\n        setResult(data);\r\n      }\r\n    } catch (err: any) {\r\n      setError('Erreur inattendue');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <main className=\"p-8 max-w-2xl mx-auto\">\r\n      <h1 className=\"text-2xl font-bold mb-4\">Analyse de Document </h1>\r\n\r\n      <input\r\n        type=\"text\"\r\n        className=\"border w-full mb-2 p-2 rounded\"\r\n        placeholder=\"Titre du document\"\r\n        value={title}\r\n        onChange={(e) => setTitle(e.target.value)}\r\n      />\r\n\r\n      <input\r\n        type=\"file\"\r\n        className=\"mb-2\"\r\n        accept=\".pdf,.txt,.doc,.docx,.csv,.xls,.xlsx,.ppt,.pptx\"\r\n        onChange={(e) => {\r\n          if (e.target.files && e.target.files[0]) {\r\n            setFile(e.target.files[0]);\r\n          }\r\n        }}\r\n      />\r\n\r\n      <div className=\"mb-4\">\r\n        <label className=\"mr-4\">Choisir un fournisseur ia :</label>\r\n        <select\r\n          value={provider}\r\n          onChange={(e) => setProvider(e.target.value as 'claude' | 'openai')}\r\n          className=\"border px-2 py-1\"\r\n        >\r\n          <option value=\"claude\">Claude AI</option>\r\n          <option value=\"openai\">OpenAI GPT-4</option>\r\n        </select>\r\n      </div>\r\n\r\n      <button\r\n        onClick={handleSubmit}\r\n        className=\"bg-blue-600 text-white px-4 py-2 rounded disabled:opacity-50\"\r\n        disabled={loading}\r\n      >\r\n        {loading ? 'Analyse en cours...' : 'Analyser le document'}\r\n      </button>\r\n\r\n      {error && <p className=\"text-red-500 mt-4\">{error}</p>}\r\n\r\n      {result && (\r\n        <div className=\"mt-6 bg-black-100 p-4 rounded\">\r\n          <h2 className=\"text-lg font-semibold mb-2\">Résumé :</h2>\r\n          <p className=\"whitespace-pre-wrap\">{result.summary}</p>\r\n\r\n          <h2 className=\"text-lg font-semibold mt-4 mb-2\">Analyse :</h2>\r\n          <p className=\"whitespace-pre-wrap\">{result.analysis}</p>\r\n\r\n          <div className=\"mt-4 flex gap-4\">\r\n            <button className=\"bg-green-600 text-white px-4 py-2 rounded\">\r\n              Enregistrer\r\n            </button>\r\n            <button\r\n              className=\"bg-gray-400 text-white px-4 py-2 rounded\"\r\n              onClick={() => {\r\n                setResult(null);\r\n              }}\r\n            >\r\n              Annuler\r\n            </button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </main>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AAFA;;;AAIe,SAAS;IACtB,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAe;IAC9C,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACnC,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAuB;IAC9D,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACvC,MAAM,CAAC,QAAQ,UAAU,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAO;IAC1C,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAEnC,MAAM,eAAe;QACnB,IAAI,CAAC,QAAQ,CAAC,OAAO;YACnB,MAAM;YACN;QACF;QAEA,MAAM,WAAW,IAAI;QACrB,SAAS,MAAM,CAAC,QAAQ;QACxB,SAAS,MAAM,CAAC,SAAS;QAEzB,WAAW;QACX,UAAU;QACV,SAAS;QAET,IAAI;YACF,MAAM,MAAM,MAAM,MAAM,CAAC,oDAAoD,EAAE,UAAU,EAAE;gBACzF,QAAQ;gBACR,MAAM;YACR;YAEA,MAAM,OAAO,MAAM,IAAI,IAAI;YAE3B,IAAI,KAAK,KAAK,EAAE;gBACd,SAAS,KAAK,KAAK;YACrB,OAAO;gBACL,UAAU;YACZ;QACF,EAAE,OAAO,KAAU;YACjB,SAAS;QACX,SAAU;YACR,WAAW;QACb;IACF;IAEA,qBACE,8OAAC;QAAK,WAAU;;0BACd,8OAAC;gBAAG,WAAU;0BAA0B;;;;;;0BAExC,8OAAC;gBACC,MAAK;gBACL,WAAU;gBACV,aAAY;gBACZ,OAAO;gBACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;;;;;;0BAG1C,8OAAC;gBACC,MAAK;gBACL,WAAU;gBACV,QAAO;gBACP,UAAU,CAAC;oBACT,IAAI,EAAE,MAAM,CAAC,KAAK,IAAI,EAAE,MAAM,CAAC,KAAK,CAAC,EAAE,EAAE;wBACvC,QAAQ,EAAE,MAAM,CAAC,KAAK,CAAC,EAAE;oBAC3B;gBACF;;;;;;0BAGF,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAM,WAAU;kCAAO;;;;;;kCACxB,8OAAC;wBACC,OAAO;wBACP,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;wBAC3C,WAAU;;0CAEV,8OAAC;gCAAO,OAAM;0CAAS;;;;;;0CACvB,8OAAC;gCAAO,OAAM;0CAAS;;;;;;;;;;;;;;;;;;0BAI3B,8OAAC;gBACC,SAAS;gBACT,WAAU;gBACV,UAAU;0BAET,UAAU,wBAAwB;;;;;;YAGpC,uBAAS,8OAAC;gBAAE,WAAU;0BAAqB;;;;;;YAE3C,wBACC,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;kCAA6B;;;;;;kCAC3C,8OAAC;wBAAE,WAAU;kCAAuB,OAAO,OAAO;;;;;;kCAElD,8OAAC;wBAAG,WAAU;kCAAkC;;;;;;kCAChD,8OAAC;wBAAE,WAAU;kCAAuB,OAAO,QAAQ;;;;;;kCAEnD,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAO,WAAU;0CAA4C;;;;;;0CAG9D,8OAAC;gCACC,WAAU;gCACV,SAAS;oCACP,UAAU;gCACZ;0CACD;;;;;;;;;;;;;;;;;;;;;;;;AAQb","debugId":null}}]
}