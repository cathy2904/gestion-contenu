{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/komba/Gestion-contenu/FRONTEND/components/Principal.tsx"],"sourcesContent":["export default function Principal({titre, children}: {titre:string, children: React.ReactNode}) {\r\n  return (\r\n    <div className=\" w-full md:w-5/6 bg-[#121313] p-3 md:p-6  space-y-4 overflow-hidden h-auto\">\r\n        <h1 className=\"text-3xl font-bold\">{titre} </h1>\r\n        <div className=\"bg-[#121313] h-[90%]\">{children}</div>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAAe,SAAS,UAAU,EAAC,KAAK,EAAE,QAAQ,EAA4C;IAC5F,qBACE,8OAAC;QAAI,WAAU;;0BACX,8OAAC;gBAAG,WAAU;;oBAAsB;oBAAM;;;;;;;0BAC1C,8OAAC;gBAAI,WAAU;0BAAwB;;;;;;;;;;;;AAG/C","debugId":null}},
    {"offset": {"line": 152, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/komba/Gestion-contenu/FRONTEND/app/content/page.tsx"],"sourcesContent":["'use client';\r\nimport Principal from \"@/components/Principal\";\r\nimport React, { useEffect, useState } from 'react';\r\n\r\n// import { Content } from \"./types/content\";\r\n\r\nimport { fetchContents } from \"./api/route\";\r\nimport ContentList from \"../components/ContentList\";\r\nimport Link from \"next/link\";\r\nimport axios from \"axios\";\r\n\r\nexport interface Content {\r\n  _id: string;\r\n  title: string;\r\n  content: string;\r\n  style: string;\r\n  length: string;\r\n  provider: string;\r\n  user: string;\r\n   schedule: Date,\r\n   statut: 'brouillon' | 'programmé' | 'publié';\r\n  channel: 'linkedin' | 'email' | 'blog';\r\n\r\n  createdAt: string;\r\n  updatedAt: string;\r\n}\r\n\r\nexport default function ContentPage() {\r\n  const [contents, setContents] = useState<Content[]>([])\r\n  const [loading, setLoading] = useState(true)\r\n  const [page, setPage] = useState(1);\r\nconst [totalPages, setTotalPages] = useState(1);\r\n// plannification\r\nconst [statut, setStatut] = useState('');\r\n\r\n  // Filtres\r\n  const [user, setUser] = useState('');\r\n  const [style, setStyle] = useState('');\r\n  const [date, setDate] = useState('');\r\n  // const [selectedStyle, setSelectedStyle] = useState('');\r\n\r\n\r\n\r\n  const fetchContents = async (page: number) => {\r\n    try {\r\n      const response = await axios.get('http://localhost:3003/api/content?page=${page}&limit=10',  {\r\n        params: {\r\n          page,\r\n          limit: 10,\r\n          user: user || undefined,\r\n          style: style || undefined,\r\n          date: date || undefined,\r\n           statut: statut || undefined,\r\n        },\r\n        \r\n    })\r\n    \r\n      // setContents(response.data)\r\n      const data = response.data\r\n     if (Array.isArray(data.contents)) {\r\n        setContents(data.contents);\r\n        setTotalPages(data.totalPages);\r\n      } else {\r\n        setContents([]);\r\n        console.error('❌ Données inattendues :', data);\r\n      }\r\n     } catch (error) {\r\n      console.error('❌ Erreur lors du chargement des contenus :', error)\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  \r\n  useEffect(() => {\r\n    fetchContents(page)\r\n  }, [page, user, style, date])\r\n\r\n  const handlePublish = async (id: string) => {\r\n    try {\r\n      await axios.put(`http://localhost:3003/api/content/${id}/publish`);\r\n      fetchContents(page);\r\n    } catch (error) {\r\n      console.error(\"Erreur lors de la publication :\", error);\r\n    }\r\n  };\r\n\r\n  const handleDelete = async (id: string) => {\r\n    try {\r\n      await axios.delete(`http://localhost:3003/api/content/${id}`);\r\n      fetchContents(page);\r\n    } catch (error) {\r\n      console.error(\"Erreur lors de la suppression :\", error);\r\n    }\r\n  };\r\n\r\n  return (\r\n<Principal titre=\"Contents\">\r\n      <h1>Content Home</h1>\r\n\r\n      <div>\r\n      <Link\r\n          href=\"/content/create\"\r\n          className=\"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition\"\r\n        >\r\n          ➕ Créer un contenu\r\n        </Link>\r\n      {/* <h1>Liste des contenus</h1>\r\n      <ContentList contents={content} /> */}\r\n      <div className=\"p-6\">\r\n      <h1 className=\"text-2xl font-bold mb-4\"> Liste des Contenus Générés</h1>\r\n      {/* Filtres */}\r\n      <div className=\"flex gap-4 mb-4\">\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"ID utilisateur\"\r\n          value={user}\r\n          onChange={(e) => setUser(e.target.value)}\r\n          className=\"border p-2\"\r\n        />\r\n        <select\r\n          value={style}\r\n          onChange={(e) => setStyle(e.target.value)}\r\n          className=\"border p-2\"\r\n        >\r\n          <option value=\"\">Tous les styles</option>\r\n          <option value=\"{{style}}\"></option>\r\n         <option value=\"standard\">Style standard</option>\r\n          <option value=\"humour\">Style humour</option>\r\n          <option value=\"marketing\">Style marketing</option>\r\n          <option value=\"formal\">Formel</option>\r\n          <option value=\"casual\">Décontracté</option>\r\n          <option value=\"professional\">Professionnel</option>\r\n          <option value=\"academic\">Académique</option>\r\n          <option value=\"creative\">Créatif</option>\r\n          <option value=\"persuasive\">Persuasif</option>\r\n          <option value=\"informative\">Informatif</option>\r\n        </select>\r\n        <input\r\n          type=\"date\"\r\n          value={date}\r\n          onChange={(e) => setDate(e.target.value)}\r\n          className=\"border p-2\"\r\n        />\r\n      </div>\r\n\r\n\r\n      {loading ? (\r\n        <p>Chargement en cours...</p>\r\n      ) : contents.length === 0 ? (\r\n        <p>Aucun contenu trouvé.</p>\r\n      ) : (\r\n        <table className=\"w-full table-auto border border-gray-300\">\r\n          <thead>\r\n            <tr className=\"bg-black-100\">\r\n              <th className=\"border px-2 py-2\">Titre</th>\r\n              <th className=\"border px-2 py-2\">Fournisseur</th>\r\n              <th className=\"border px-2 py-2\">Style</th>\r\n              <th className=\"border px-2 py-2\">Longueur</th>\r\n              {/* <th className=\"border px-4 py-2\">Date</th> */}\r\n              <th className=\"border px-4 py-2\">Contenu</th>\r\n              <th className=\"border px-4 py-2\">Status</th>\r\n              <th className=\"border px-4 py-2\">Actions</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {contents.map((item) => (\r\n              <tr key={item._id} className=\"hover:bg-black-50\">\r\n                <td className=\"border px-2 py-2\">{item.title}</td>\r\n                <td className=\"border px-2 py-2\">{item.provider}</td>\r\n                <td className=\"border px-2 py-2\">{item.style}</td>\r\n                <td className=\"border px-2 py-2\">{item.length}</td>\r\n                 <td className=\"border px-4 py-2 max-w-sm overflow-hidden text-ellipsis whitespace-nowrap\" title={item.content}>\r\n                  {item.content?.slice(0,100) }...\r\n                </td>\r\n                <td className=\"border px-4 py-2\">{item.statut}</td>\r\n                {/* <td>\r\n                  <select\r\n                    value={statut}\r\n                    onChange={(e) => setStatut(e.target.value)}\r\n                    className=\"border p-2\"\r\n                  >\r\n                    <option value=\"\">Tous les statuts</option>\r\n                    <option value=\"\"></option>\r\n                    <option value=\"draft\">Brouillon</option>\r\n                    <option value=\"scheduled\">Programmé</option>\r\n                    <option value=\"published\">Publié</option>\r\n                  </select>\r\n                </td> */}\r\n                 <td className=\"border px-2 py-2 flex gap-2\">\r\n                      <button\r\n                        onClick={() => handlePublish(item._id)}\r\n                        className=\"bg-green-500 text-white px-2 py-1 rounded hover:bg-green-600\"\r\n                      >\r\n                        Publier\r\n                      </button>\r\n                      <button\r\n                        onClick={() => handleDelete(item._id)}\r\n                        className=\"bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600\"\r\n                      >\r\n                        Supprimer\r\n                      </button>\r\n                    </td>\r\n                {/* <td className=\"border px-4 py-2\">\r\n                  {new Date(item.createdAt).toLocaleDateString()}\r\n                </td> */}\r\n                \r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n          <button\r\n    onClick={() => setPage((prev) => Math.max(prev - 1, 1))}\r\n    disabled={page === 1}\r\n    className=\"px-4 py-2 bg-gray-300 rounded disabled:opacity-50\"\r\n  >\r\n    Précédent\r\n  </button>\r\n  <span className=\"px-4 py-2\">Page {page} / {totalPages}</span>\r\n  <button\r\n    onClick={() => setPage((prev) => Math.min(prev + 1, totalPages))}\r\n    disabled={page === totalPages}\r\n    className=\"px-4 py-2 bg-gray-300 rounded disabled:opacity-50\"\r\n  >\r\n    Suivant\r\n  </button>\r\n        </table>\r\n      )}\r\n    </div>\r\n  \r\n    </div>\r\n    </Principal>  )\r\n}"],"names":[],"mappings":"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","debugId":null}}]
}