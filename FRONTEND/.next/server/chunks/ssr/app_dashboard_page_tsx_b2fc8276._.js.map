{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 5, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/komba/Gestion-contenu/FRONTEND/app/dashboard/page.tsx"],"sourcesContent":["'use client';\r\nimport RequireAuth from \"@/components/RequireAuth\"; // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport Nav from \"@/components/Nav\"; // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n// import BarChart from \"@/components/chart/Chart\";\r\nimport MobileBar from \"@/components/MobileBar\"; // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { useEffect, useState } from \"react\";\r\nimport { motion } from 'framer-motion';\r\nimport { FiActivity, FiTrendingUp, FiLoader } from 'react-icons/fi';\r\nimport {\r\n  PieChart,\r\n  Pie,\r\n  Cell,\r\n  Tooltip,\r\n  Legend,\r\n  BarChart,\r\n  Bar,\r\n  XAxis,\r\n  YAxis,\r\n  ResponsiveContainer,\r\n} from 'recharts';\r\n\r\nconst COLORS = ['#8884d8', '#82ca9d', '#ffc658', '#ff8042', '#a4de6c', '#d0ed57'];\r\n\r\n\r\nexport default function DashboardPage() {\r\n\r\n const [stats, setStats] = useState<any>(null); // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n  const [statusFilter, setStatusFilter] = useState<string>('');\r\n  const [dateFilter, setDateFilter] = useState<string>('');\r\n\r\n  useEffect(() => {\r\n  const queryParams = new URLSearchParams();\r\n  if (statusFilter) queryParams.append(\"statut\", statusFilter);\r\n  if (dateFilter) queryParams.append(\"date\", dateFilter);\r\n\r\n  fetch(`http://localhost:3000/api/content/stats?${queryParams.toString()}`)\r\n    .then((res) => res.json())\r\n    .then((data) => {\r\n      console.log(\"Donn√©es re√ßues:\", data); \r\n      setStats(data);\r\n    })\r\n    .catch(console.error);\r\n}, [statusFilter, dateFilter]);\r\n\r\n\r\nconst LoadingAnimation = () => {\r\n  return (\r\n    <motion.div \r\n      initial={{ opacity: 0 }}\r\n      animate={{ opacity: 1 }}\r\n      exit={{ opacity: 0 }}\r\n      className=\"flex flex-col items-center justify-center p-8 space-y-6\"\r\n    >\r\n      <motion.div\r\n        animate={{ rotate: 360 }}\r\n        transition={{ duration: 2, repeat: Infinity, ease: \"linear\" }}\r\n        className=\"text-4xl text-indigo-600\"\r\n      >\r\n        <FiLoader />\r\n      </motion.div>\r\n\r\n      <motion.div\r\n        initial={{ y: 20 }}\r\n        animate={{ y: 0 }}\r\n        transition={{ \r\n          y: { repeat: Infinity, duration: 1.5, repeatType: \"reverse\" } \r\n        }}\r\n        className=\"flex space-x-4\"\r\n      >\r\n        <FiActivity className=\"text-xl text-pink-500\" />\r\n        <FiTrendingUp className=\"text-xl text-blue-500\" />\r\n      </motion.div>\r\n\r\n      <motion.p\r\n        initial={{ opacity: 0.5 }}\r\n        animate={{ opacity: 1 }}\r\n        transition={{ \r\n          opacity: { duration: 1, repeat: Infinity, repeatType: \"reverse\" }\r\n        }}\r\n        className=\"text-lg font-medium text-gray-600\"\r\n      >\r\n        Pr√©paration de vos donn√©es...\r\n      </motion.p>\r\n    </motion.div>\r\n  );\r\n};\r\n\r\n  // if (!stats) return <p className=\"p-6 text-lg\">Chargement des statistiques...</p>;\r\n  if (!stats) return <LoadingAnimation />;\r\n\r\n  return (\r\n    // <RequireAuth>\r\n    //   <Nav/>\r\n    //   <MobileBar/>\r\n      \r\n    //   <div>\r\n    //     <h1>Dashboard s√©curis√©</h1>\r\n    //   </div>\r\n    // </RequireAuth>\r\n\r\n      <div className=\"p-12\">\r\n      <h1 className=\"text-3xl font-bold mb-6\">üìä Dashboard des contenus</h1>\r\n\r\n      <div className=\"flex gap-4 mb-6\">\r\n        <select\r\n          value={statusFilter}\r\n          onChange={(e) => setStatusFilter(e.target.value)}\r\n          className=\"border rounded p-2\" \r\n        >\r\n          <option value=\"\">Tous les statuts</option>\r\n          <option value=\"brouillon\">Brouillon</option>\r\n          <option value=\"programm√©\">Programm√©</option>\r\n          <option value=\"publi√©\">Publi√©</option>\r\n        </select>\r\n\r\n        <input\r\n          type=\"date\"\r\n          value={dateFilter}\r\n          onChange={(e) => setDateFilter(e.target.value)}\r\n          className=\"border rounded p-2\"\r\n        />\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8\">\r\n        <div className=\"bg-black p-6 shadow rounded-xl\">\r\n          <h2 className=\"text-xl font-semibold mb-2\">Total des contenus</h2>\r\n          <p className=\"text-4xl font-bold text-indigo-600\">{stats.total}</p>\r\n        </div>\r\n\r\n        <div className=\"bg-black p-6 shadow rounded-xl\">\r\n          <h2 className=\"text-xl font-semibold mb-2\">Contenus par statut</h2>\r\n          {(stats.byStatus ?? []).length > 0 ? (\r\n          <ResponsiveContainer width=\"100%\" height={250}>\r\n            <PieChart>\r\n              <Pie\r\n                dataKey=\"count\"\r\n                data={stats.byStatus}\r\n                nameKey=\"_id\"\r\n                cx=\"50%\"\r\n                cy=\"50%\"\r\n                outerRadius={80}\r\n                label\r\n              >\r\n                {(stats.byStatus ?? []).map((item: { _id: string, count: number }, index: number) => (\r\n                <Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />\r\n                ))}\r\n              </Pie>\r\n              <Tooltip />\r\n              <Legend />\r\n            </PieChart>\r\n          </ResponsiveContainer>\r\n          ) : (\r\n            <p>Aucune donn√©e pour ce statut.</p>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"bg-black p-6 shadow rounded-xl\">\r\n        <h2 className=\"text-xl font-semibold mb-4\">Contenus par r√©seau social</h2>\r\n        <ResponsiveContainer width=\"100%\" height={300}>\r\n          <BarChart data={stats.byPlatform ?? []}>\r\n            <XAxis dataKey=\"_id\" />\r\n            <YAxis />\r\n            <Tooltip />\r\n            <Legend />\r\n            <Bar dataKey=\"count\" fill=\"#8884d8\" />\r\n          </BarChart>\r\n        </ResponsiveContainer>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n"],"names":[],"mappings":"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","debugId":null}}]
}