{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/komba/Gestion-contenu/FRONTEND/app/upload/page.tsx"],"sourcesContent":["'use client';\r\nimport { useState } from 'react';\r\n\r\nexport default function UploadPage() {\r\n  const [file, setFile] = useState<File | null>(null);\r\n  const [title, setTitle] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const [response, setResponse] = useState<any>(null);\r\n\r\n  const handleSubmit = async () => {\r\n    if (!file || !title) return;\r\n    const formData = new FormData();\r\n    formData.append('file', file);\r\n    formData.append('title', title);\r\n\r\n    setLoading(true);\r\n    const res = await fetch('http://localhost:3003/api/documents/upload', {\r\n      method: 'POST',\r\n      body: formData,\r\n    });\r\n    const json = await res.json();\r\n    setResponse(json);\r\n    setLoading(false);\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    if (!response || !title) return;\r\n\r\n    const res = await fetch('http://localhost:3003/api/documents', {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify({\r\n        title,\r\n        content: response.content,\r\n        summary: response.summary,\r\n        analysis: response.analysis,\r\n      }),\r\n    });\r\n\r\n    if (res.ok) {\r\n      alert('Document enregistré avec succès');\r\n      handleReset();\r\n    } else {\r\n      alert('Erreur lors de l’enregistrement');\r\n    }\r\n  };\r\n\r\n  const handleReset = () => {\r\n    setFile(null);\r\n    setTitle('');\r\n    setResponse(null);\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-6 max-w-xl mx-auto\">\r\n      <h1 className=\"text-xl font-bold mb-4\">Uploader un Document PDF</h1>\r\n      <input\r\n        type=\"text\"\r\n        value={title}\r\n        onChange={e => setTitle(e.target.value)}\r\n        placeholder=\"Titre du document\"\r\n        className=\"border p-2 w-full mb-4\"\r\n      />\r\n      <input\r\n        type=\"file\"\r\n        accept=\"application/pdf\"\r\n        onChange={e => setFile(e.target.files?.[0] ?? null)}\r\n        className=\"mb-4\"\r\n      />\r\n      <button\r\n        onClick={handleSubmit}\r\n        disabled={loading}\r\n        className=\"bg-blue-500 text-white px-4 py-2 rounded disabled:opacity-50\"\r\n      >\r\n        Envoyer\r\n      </button>\r\n\r\n      {loading && <p className=\"mt-4 text-gray-500\">Analyse en cours...</p>}\r\n\r\n      {response && (\r\n        <div className=\"mt-6\">\r\n          <h2 className=\"text-lg font-semibold mb-2\">Résumé :</h2>\r\n          <p className=\"bg-black-100 p-4 rounded\">{response.summary}</p>\r\n\r\n          <h2 className=\"text-lg font-semibold mt-4 mb-2\">Analyse :</h2>\r\n          <p className=\"bg-black-100 p-4 rounded\">{response.analysis}</p>\r\n\r\n          <div className=\"flex gap-4 mt-4\">\r\n            <button\r\n              onClick={handleSave}\r\n              className=\"bg-green-600 text-white px-4 py-2 rounded\"\r\n            >\r\n              Enregistrer\r\n            </button>\r\n            <button\r\n              onClick={handleReset}\r\n              className=\"bg-red-600 text-white px-4 py-2 rounded\"\r\n            >\r\n              Annuler\r\n            </button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AACA;AADA;;;AAGe,SAAS;IACtB,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAe;IAC9C,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACnC,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACvC,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAO;IAE9C,MAAM,eAAe;QACnB,IAAI,CAAC,QAAQ,CAAC,OAAO;QACrB,MAAM,WAAW,IAAI;QACrB,SAAS,MAAM,CAAC,QAAQ;QACxB,SAAS,MAAM,CAAC,SAAS;QAEzB,WAAW;QACX,MAAM,MAAM,MAAM,MAAM,8CAA8C;YACpE,QAAQ;YACR,MAAM;QACR;QACA,MAAM,OAAO,MAAM,IAAI,IAAI;QAC3B,YAAY;QACZ,WAAW;IACb;IAEA,MAAM,aAAa;QACjB,IAAI,CAAC,YAAY,CAAC,OAAO;QAEzB,MAAM,MAAM,MAAM,MAAM,uCAAuC;YAC7D,QAAQ;YACR,SAAS;gBAAE,gBAAgB;YAAmB;YAC9C,MAAM,KAAK,SAAS,CAAC;gBACnB;gBACA,SAAS,SAAS,OAAO;gBACzB,SAAS,SAAS,OAAO;gBACzB,UAAU,SAAS,QAAQ;YAC7B;QACF;QAEA,IAAI,IAAI,EAAE,EAAE;YACV,MAAM;YACN;QACF,OAAO;YACL,MAAM;QACR;IACF;IAEA,MAAM,cAAc;QAClB,QAAQ;QACR,SAAS;QACT,YAAY;IACd;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAG,WAAU;0BAAyB;;;;;;0BACvC,8OAAC;gBACC,MAAK;gBACL,OAAO;gBACP,UAAU,CAAA,IAAK,SAAS,EAAE,MAAM,CAAC,KAAK;gBACtC,aAAY;gBACZ,WAAU;;;;;;0BAEZ,8OAAC;gBACC,MAAK;gBACL,QAAO;gBACP,UAAU,CAAA,IAAK,QAAQ,EAAE,MAAM,CAAC,KAAK,EAAE,CAAC,EAAE,IAAI;gBAC9C,WAAU;;;;;;0BAEZ,8OAAC;gBACC,SAAS;gBACT,UAAU;gBACV,WAAU;0BACX;;;;;;YAIA,yBAAW,8OAAC;gBAAE,WAAU;0BAAqB;;;;;;YAE7C,0BACC,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;kCAA6B;;;;;;kCAC3C,8OAAC;wBAAE,WAAU;kCAA4B,SAAS,OAAO;;;;;;kCAEzD,8OAAC;wBAAG,WAAU;kCAAkC;;;;;;kCAChD,8OAAC;wBAAE,WAAU;kCAA4B,SAAS,QAAQ;;;;;;kCAE1D,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCACC,SAAS;gCACT,WAAU;0CACX;;;;;;0CAGD,8OAAC;gCACC,SAAS;gCACT,WAAU;0CACX;;;;;;;;;;;;;;;;;;;;;;;;AAQb","debugId":null}}]
}