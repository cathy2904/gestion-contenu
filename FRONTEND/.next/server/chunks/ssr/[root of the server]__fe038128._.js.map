{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 111, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/komba/Gestion-contenu/FRONTEND/app/upload/drafts/page.tsx"],"sourcesContent":["'use client';\r\nimport axios from 'axios';\r\nimport { useEffect, useState } from 'react';\r\n\r\nexport default function DraftsPage() {\r\n  // const [documents, setDocuments] = useState<any[]>([]);\r\n\r\n  // useEffect(() => {\r\n  //   fetch('http://localhost:3003/api/documents') // Assure-toi d’avoir une route GET\r\n  //     .then(res => res.json())\r\n  //     .then(data => setDocuments(data));\r\n  // }, []);\r\n\r\n  const [documents, setDocuments] = useState<any[]>([]);\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const [error, setError] = useState<string | null>(null);\r\n    const [totalPages, setTotalPages] = useState(1);\r\n     const [page, setPage] = useState(1);\r\n   \r\n    // const handleDelete = async (id: string) => {\r\n    //   try {\r\n    //     await deleteDocument(id);\r\n    //     setDocuments(documents.filter(document => document._id !== id));\r\n    //   } catch (err) {\r\n    //     setError('Erreur lors de la suppression du post');\r\n    //     console.error(err);\r\n    //   }\r\n    // };\r\n\r\n    const fetchDocuments = async (page: number) => {\r\n        try {\r\n          const response = await axios.get(`http://localhost:3003/api/documents?page=${page}&limit=10`, {\r\n            params: {\r\n            \r\n            },\r\n          });\r\n          const data = response.data;\r\n          if (Array.isArray(data.documents)) {\r\n            setDocuments(data.documents);\r\n            setTotalPages(data.totalPages);\r\n          } else {\r\n            setDocuments([]);\r\n            console.error('❌ Données inattendues :', data);\r\n          }\r\n        } catch (error) {\r\n          console.error('❌ Erreur lors du chargement des contenus :', error);\r\n        } finally {\r\n          setIsLoading(false);\r\n        }\r\n      };\r\n  \r\n   useEffect(() => {\r\n       fetchDocuments(page);\r\n     }, [page]);\r\n   \r\n  \r\n    if (isLoading) {\r\n      return (\r\n        <div className=\"flex justify-center items-center h-64\">\r\n          <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-green-500\"></div>\r\n        </div>\r\n      );\r\n    }\r\n  \r\n    if (error) {\r\n      return (\r\n        <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative\" role=\"alert\">\r\n          <strong className=\"font-bold\">Erreur ! </strong>\r\n          <span className=\"block sm:inline\">{error}</span>\r\n        </div>\r\n      );\r\n    }\r\n  \r\n\r\n  return (\r\n    <div className=\"p-6\">\r\n      <h1 className=\"text-2xl font-bold mb-4\">Documents enregistrés</h1>\r\n      {documents.length === 0 ? (\r\n        <p>Aucun document trouvé.</p>\r\n      ) : (\r\n        <ul className=\"space-y-4\">\r\n          {documents.map(doc => (\r\n            <li key={doc._id} className=\"border p-4 rounded shadow\">\r\n              <h2 className=\"text-lg font-semibold\">{doc.title}</h2>\r\n              {/* <p className=\"text-sm text-gray-600\">{doc.createdAt}</p> */}\r\n              <p className=\"mt-2\" title={doc.summary}>{doc.summary?.slice(0,250)}...</p>\r\n              <p className=\"mt-2\" title={doc.analysis}>{doc.analysis?.slice(0,250)}...</p>\r\n              \r\n            </li>\r\n          ))}\r\n        </ul>\r\n        \r\n      )}\r\n    </div>\r\n    \r\n  );\r\n}\r\n\r\n\r\n\r\n// 'use client';\r\n// import { useEffect, useState } from 'react';\r\n\r\n// export default function DraftsPage() {\r\n//   const [docs, setDocs] = useState<any[]>([]);\r\n//   const [loading, setLoading] = useState(true);\r\n\r\n//   const fetchDocs = async () => {\r\n//     const res = await fetch('http://localhost:3001/documents');\r\n//     const data = await res.json();\r\n//     setDocs(data);\r\n//     setLoading(false);\r\n//   };\r\n\r\n//   const handleDelete = async (id: string) => {\r\n//     await fetch(`http://localhost:3001/documents/${id}`, { method: 'DELETE' });\r\n//     fetchDocs();\r\n//   };\r\n\r\n//   useEffect(() => {\r\n//     fetchDocs();\r\n//   }, []);\r\n\r\n//   return (\r\n//     <div className=\"p-4\">\r\n//       <h1 className=\"text-xl font-bold mb-4\">Tous les documents</h1>\r\n//       {loading ? <p>Chargement...</p> : (\r\n//         <ul className=\"space-y-4\">\r\n//           {docs.map(doc => (\r\n//             <li key={doc._id} className=\"border p-4 rounded shadow\">\r\n//               <h2 className=\"font-bold\">{doc.title}</h2>\r\n//               <p className=\"text-sm text-gray-500\">Résumé : {doc.summary?.slice(0, 200)}...</p>\r\n//               <div className=\"mt-2 flex gap-2\">\r\n//                 <button onClick={() => handleDelete(doc._id)} className=\"bg-red-500 text-white px-2 py-1 rounded\">Supprimer</button>\r\n//               </div>\r\n//             </li>\r\n//           ))}\r\n//         </ul>\r\n//       )}\r\n//     </div>\r\n//   );\r\n// }\r\n"],"names":[],"mappings":"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","debugId":null}}]
}