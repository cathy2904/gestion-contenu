{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 111, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/komba/Gestion-contenu/FRONTEND/app/post/service/api.ts"],"sourcesContent":["import axios from 'axios';\r\nimport { UpdatePostDto, Post } from '../types/post';\r\n//import { CreatePostData, Post, UpdatePostData } from '../../types/post';\r\n\r\nconst api = axios.create({\r\n  baseURL: 'http://localhost:3003/api',\r\n});\r\nexport const getPosts = () => api.get('/posts');\r\nexport const getPost = (id: string) => api.get(`/posts/${id}`);\r\nexport const createPost = (postData: FormData) => api.post('/posts', postData, {\r\n  headers: {\r\n    'Content-Type': 'multipart/form-data',\r\n  },\r\n});\r\nexport const updatePost = (id: string, postData: any) => api.put(`/posts/${id}`, postData);\r\n// export const updatePost = (id: string, postData: FormData) =>\r\n//     api.put(`/posts/${id}`, postData, {\r\n//       headers: {\r\n//         'Content-Type': 'multipart/form-data',\r\n        \r\n//       },\r\n//       method: 'PUT',\r\n      \r\n//     });\r\n\r\n    // export async function updatePost(id: string, postData: UpdatePostDto, imageFile?: File): Promise<Post> {\r\n    //   const formData = new FormData();\r\n      \r\n    //   // Ajout des données du post\r\n    //   Object.entries(postData).forEach(([key, value]) => {\r\n    //     if (value) formData.append(key, value);\r\n    //   });\r\n      \r\n    //   // Ajout du fichier image s'il existe\r\n    //   if (imageFile) {\r\n    //     formData.append('image', imageFile);\r\n    //   }\r\n      \r\n    //   const response = await fetch(`http://localhost:3003/api/posts/${id}`, {\r\n    //     method: 'PATCH',\r\n    //     body: formData,\r\n    //   });\r\n      \r\n    //   if (!response.ok) {\r\n    //     throw new Error('Erreur lors de la mise à jour du post');\r\n    //   }\r\n      \r\n    //   return response.json();\r\n    // }\r\n\r\n    \r\nexport const deletePost = (id: string) => api.delete(`/posts/${id}`);\r\n// export const getPosts = () => api.get('/posts');\r\n// export const getPost = (id: string) => api.get(`/posts/${id}`);\r\n// export const createPost = (postData: any) => api.post('/posts', postData);\r\n// export const updatePost = (id: string, postData: any) => api.put(`/posts/${id}`, postData);\r\n// export const deletePost = (id: string) => api.delete(`/posts/${id}`);"],"names":[],"mappings":";;;;;;;AAAA;;AAEA,0EAA0E;AAE1E,MAAM,MAAM,qIAAA,CAAA,UAAK,CAAC,MAAM,CAAC;IACvB,SAAS;AACX;AACO,MAAM,WAAW,IAAM,IAAI,GAAG,CAAC;AAC/B,MAAM,UAAU,CAAC,KAAe,IAAI,GAAG,CAAC,CAAC,OAAO,EAAE,IAAI;AACtD,MAAM,aAAa,CAAC,WAAuB,IAAI,IAAI,CAAC,UAAU,UAAU;QAC7E,SAAS;YACP,gBAAgB;QAClB;IACF;AACO,MAAM,aAAa,CAAC,IAAY,WAAkB,IAAI,GAAG,CAAC,CAAC,OAAO,EAAE,IAAI,EAAE;AAqC1E,MAAM,aAAa,CAAC,KAAe,IAAI,MAAM,CAAC,CAAC,OAAO,EAAE,IAAI,GACnE,mDAAmD;CACnD,kEAAkE;CAClE,6EAA6E;CAC7E,8FAA8F;CAC9F,wEAAwE","debugId":null}},
    {"offset": {"line": 143, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/komba/Gestion-contenu/FRONTEND/app/components/ConfirmationModal.tsx"],"sourcesContent":["import { useEffect } from 'react';\r\n\r\nexport default function ConfirmationModal({\r\n  isOpen,\r\n  onClose,\r\n  onConfirm,\r\n  title,\r\n  message,\r\n}: {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  onConfirm: () => void;\r\n  title: string;\r\n  message: string;\r\n}) {\r\n  useEffect(() => {\r\n    const handleEscape = (e: KeyboardEvent) => {\r\n      if (e.key === 'Escape') onClose();\r\n    };\r\n\r\n    if (isOpen) {\r\n      document.addEventListener('keydown', handleEscape);\r\n      document.body.style.overflow = 'hidden';\r\n    }\r\n\r\n    return () => {\r\n      document.removeEventListener('keydown', handleEscape);\r\n      document.body.style.overflow = 'auto';\r\n    };\r\n  }, [isOpen, onClose]);\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 overflow-y-auto\">\r\n      <div className=\"flex min-h-screen items-end justify-center px-4 pt-4 pb-20 text-center sm:block sm:p-0\">\r\n        <div className=\"fixed inset-0 transition-opacity\" onClick={onClose}>\r\n          <div className=\"absolute inset-0 bg-gray-500 opacity-75\"></div>\r\n        </div>\r\n\r\n        <span className=\"hidden sm:inline-block sm:h-screen sm:align-middle\"></span>&#8203;\r\n\r\n        <div className=\"inline-block transform overflow-hidden rounded-lg bg-black text-left align-bottom shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg sm:align-middle\">\r\n          <div className=\"bg-black px-4 pt-5 pb-4 sm:p-6 sm:pb-4\">\r\n            <h3 className=\"text-lg font-medium leading-6 text-white-900\">{title}</h3>\r\n            <div className=\"mt-2\">\r\n              <p className=\"text-sm text-white-500\">{message}</p>\r\n            </div>\r\n          </div>\r\n          <div className=\"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6\">\r\n            <button\r\n              onClick={onConfirm}\r\n              type=\"button\"\r\n              className=\"inline-flex w-full justify-center rounded-md border border-transparent bg-red-600 px-4 py-2 text-base font-medium text-white shadow-sm hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 sm:ml-3 sm:w-auto sm:text-sm\"\r\n            >\r\n              Confirmer\r\n            </button>\r\n            <button\r\n              onClick={onClose}\r\n              type=\"button\"\r\n              className=\"mt-3 inline-flex w-full justify-center rounded-md border border-gray-300 bg-black px-4 py-2 text-base font-medium text-white-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm\"\r\n            >\r\n              Annuler\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":";;;;AAAA;;;AAEe,SAAS,kBAAkB,EACxC,MAAM,EACN,OAAO,EACP,SAAS,EACT,KAAK,EACL,OAAO,EAOR;IACC,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,MAAM,eAAe,CAAC;YACpB,IAAI,EAAE,GAAG,KAAK,UAAU;QAC1B;QAEA,IAAI,QAAQ;YACV,SAAS,gBAAgB,CAAC,WAAW;YACrC,SAAS,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG;QACjC;QAEA,OAAO;YACL,SAAS,mBAAmB,CAAC,WAAW;YACxC,SAAS,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG;QACjC;IACF,GAAG;QAAC;QAAQ;KAAQ;IAEpB,IAAI,CAAC,QAAQ,OAAO;IAEpB,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAI,WAAU;oBAAmC,SAAS;8BACzD,cAAA,8OAAC;wBAAI,WAAU;;;;;;;;;;;8BAGjB,8OAAC;oBAAK,WAAU;;;;;;gBAA4D;8BAE5E,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAG,WAAU;8CAAgD;;;;;;8CAC9D,8OAAC;oCAAI,WAAU;8CACb,cAAA,8OAAC;wCAAE,WAAU;kDAA0B;;;;;;;;;;;;;;;;;sCAG3C,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCACC,SAAS;oCACT,MAAK;oCACL,WAAU;8CACX;;;;;;8CAGD,8OAAC;oCACC,SAAS;oCACT,MAAK;oCACL,WAAU;8CACX;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQb","debugId":null}},
    {"offset": {"line": 284, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/komba/Gestion-contenu/FRONTEND/app/components/PostTable.tsx"],"sourcesContent":["import Link from 'next/link';\r\nimport { useState } from 'react';\r\nimport ConfirmationModal from './ConfirmationModal';\r\n\r\ninterface Post {\r\n  _id: string;\r\n  title: string;\r\n  content: string;\r\n  author: string;\r\n  imagePath?: string;\r\n}\r\n\r\ninterface PostTableProps {\r\n  posts: Post[];\r\n  onDelete: (id: string) => void;\r\n}\r\n\r\nexport default function PostTable({ posts, onDelete }: PostTableProps) {\r\n  const [deleteId, setDeleteId] = useState<string | null>(null);\r\n\r\n  const handleConfirmDelete = () => {\r\n    if (deleteId) {\r\n      onDelete(deleteId);\r\n      setDeleteId(null);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"overflow-x-auto shadow-md sm:rounded-lg\">\r\n        <table className=\"w-full text-sm text-left text-white-500\">\r\n          <thead className=\"text-xs text-white-700 uppercase bg-white-50\">\r\n            <tr>\r\n              <th scope=\"col\" className=\"px-6 py-3\">Titre</th>\r\n              <th scope=\"col\" className=\"px-6 py-3\">Auteur</th>\r\n              <th scope=\"col\" className=\"px-6 py-3\">Cnotenu</th>\r\n              <th scope=\"col\" className=\"px-6 py-3\">Image</th>\r\n              <th scope=\"col\" className=\"px-6 py-3\">Actions</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {posts.map((post) => (\r\n              <tr key={post._id} className=\"bg-black border-b hover:bg-black-50\">\r\n                <td className=\"px-6 py-2 font-medium text-white-900 whitespace-nowrap\">\r\n                  {post.title}\r\n                </td>\r\n                <td className=\"px-6 py-2\">{post.author}</td>\r\n                \r\n                <td className=\"px-6 py-4\">{post.content}</td>\r\n                <td className=\"py-3 px-4 border\">\r\n                  {post.imagePath ? (\r\n                    <img\r\n                      src={`http://localhost:3003${post.imagePath}`}\r\n                      alt={post.title}\r\n                      className=\"h-16 w-16 object-cover rounded\"\r\n                      onError={(e) => {\r\n                        (e.currentTarget as HTMLImageElement).style.display = 'none';\r\n                      }}\r\n                    />\r\n                  ) : (\r\n                    <div className=\"h-16 w-16 bg-white-200 rounded flex items-center justify-center text-xs\">\r\n                      Pas d'Image\r\n                    </div>\r\n                  )}\r\n                </td>\r\n                <td className=\"px-6 py-4 space-x-2\">\r\n                    \r\n                <Link \r\n                      href={`/post/read/${post._id}`}\r\n                      className=\"font-medium text-green-600 hover:text-green-800\"\r\n                      title=\"Voir les détails\"\r\n                     >\r\n                      <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5 inline\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\r\n                        <path d=\"M10 12a2 2 0 100-4 2 2 0 000 4z\" />\r\n                        <path fillRule=\"evenodd\" d=\"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z\" clipRule=\"evenodd\" />\r\n                      </svg>\r\n                    </Link>\r\n                    <Link \r\n    href={`/post/edit/${post._id}`}\r\n    className=\"font-medium text-blue-600 hover:text-blue-800\"\r\n    title=\"Modifier\"\r\n  >\r\n    <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5 inline\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\r\n      <path d=\"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z\" />\r\n    </svg>\r\n  </Link>\r\n  <button\r\n    onClick={() => setDeleteId(post._id)}\r\n    className=\"font-medium text-red-600 hover:text-red-800\"\r\n    title=\"Supprimer\"\r\n  >\r\n    <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5 inline\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\r\n      <path fillRule=\"evenodd\" d=\"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z\" clipRule=\"evenodd\" />\r\n    </svg>\r\n  </button>\r\n                </td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n\r\n      <ConfirmationModal\r\n        isOpen={!!deleteId}\r\n        onClose={() => setDeleteId(null)}\r\n        onConfirm={handleConfirmDelete}\r\n        title=\"Confirmer la suppression\"\r\n        message=\"Êtes-vous sûr de vouloir supprimer ce post ? Cette action est irréversible.\"\r\n      />\r\n    </>\r\n  );\r\n}\r\n// import Link from 'next/link';\r\n// import { useState } from 'react';\r\n// import ConfirmationModal from './ConfirmationModal';\r\n// import React from 'react';\r\n\r\n\r\n// export default function PostTable({ posts, onDelete }: { posts: any[], onDelete: (id: string) => void }) {\r\n//   const [deleteId, setDeleteId] = useState<string | null>(null);\r\n\r\n//   const handleConfirmDelete = () => {\r\n//     if (deleteId) {\r\n//       onDelete(deleteId);\r\n//       setDeleteId(null);\r\n//     }\r\n//   };\r\n\r\n//   return (\r\n//     <>\r\n//       <div className=\"overflow-x-auto\">\r\n//         <table className=\"min-w-full bg-black\">\r\n//           <thead>\r\n//             <tr className=\"bg-black-100\">\r\n//               <th className=\"py-2 px-4 border\">Titre</th>\r\n//               <th className=\"py-2 px-4 border\">Auteur</th>\r\n//               <th className=\"py-2 px-4 border\">Contenu</th>\r\n//               <th className=\"py-2 px-4 border\">Image</th>\r\n//               <th className=\"py-2 px-4 border\">Actions</th>\r\n//             </tr>\r\n//           </thead>\r\n//           <tbody>\r\n//             {posts.map((post) => (\r\n//               <tr key={post._id} className=\"hover:bg-gray-50\">\r\n//                 <td className=\"py-2 px-4 border\">{post.title}</td>\r\n//                 <td className=\"py-2 px-4 border\">{post.author}</td>\r\n//                 <td className=\"py-2 px-4 border\">{post.content}</td>\r\n//                 <td className=\"py-2 px-4 border\">\r\n//                 {post.image ? (\r\n//                   <img \r\n//                     src={`http://localhost:3000${post.image}`} \r\n//                     alt={post.title} \r\n//                     className=\"h-16 w-16 object-cover rounded\"\r\n//                   />\r\n//                 ) : (\r\n//                   'Aucune image'\r\n//                 )}\r\n//               </td>\r\n//                 <td className=\"py-2 px-4 border\">\r\n//                   <div className=\"flex space-x-2\">\r\n//                     <Link href={`/post/${post._id}`}>\r\n//                       <button className=\"bg-blue-500 text-white px-3 py-1 rounded hover:bg-blue-600\">\r\n//                         Modifier\r\n//                       </button>\r\n//                     </Link>\r\n//                     <button\r\n//                       onClick={() => setDeleteId(post._id)}\r\n//                       className=\"bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600\"\r\n//                     >\r\n//                       Supprimer\r\n//                     </button>\r\n//                   </div>\r\n//                 </td>\r\n//               </tr>\r\n//             ))}\r\n//           </tbody>\r\n//         </table>\r\n//       </div>\r\n\r\n//       <ConfirmationModal\r\n//         isOpen={!!deleteId}\r\n//         onClose={() => setDeleteId(null)}\r\n//         onConfirm={handleConfirmDelete}\r\n//         title=\"Confirmer la suppression\"\r\n//         message=\"Êtes-vous sûr de vouloir supprimer ce post ?\"\r\n//       />\r\n//     </>\r\n//   );\r\n// }"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 637, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/komba/Gestion-contenu/FRONTEND/app/post/page.tsx"],"sourcesContent":["// Date: 2025-03-26\n'use client';\nimport { useState, useEffect } from 'react';\nimport Link from 'next/link';\nimport React from 'react';\nimport { getPosts, deletePost } from '../post/service/api';\nimport PostTable from '../components/PostTable';\n\n\n\nexport default function PostsPage() {\n  const [posts, setPosts] = useState<any[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  const fetchPosts = async () => {\n    try {\n      setIsLoading(true);\n      const response = await getPosts();\n      setPosts(response.data);\n    } catch (err) {\n      setError('Erreur lors du chargement des posts');\n      console.error(err);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleDelete = async (id: string) => {\n    try {\n      await deletePost(id);\n      setPosts(posts.filter(post => post._id !== id));\n    } catch (err) {\n      setError('Erreur lors de la suppression du post');\n      console.error(err);\n    }\n  };\n\n  useEffect(() => {\n    fetchPosts();\n  }, []);\n\n  if (isLoading) {\n    return (\n      <div className=\"flex justify-center items-center h-64\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500\"></div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative\" role=\"alert\">\n        <strong className=\"font-bold\">Erreur ! </strong>\n        <span className=\"block sm:inline\">{error}</span>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"container mx-auto px-4 py-8\">\n      <div className=\"flex justify-between items-center mb-8\">\n        <h1 className=\"text-3xl font-bold text-white-800\">Liste des Posts</h1>\n        <Link \n          href=\"/post/create\"\n          className=\"bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-4 rounded transition duration-300\"\n        >\n          Créer un nouveau post\n        </Link>\n      </div>\n\n      {posts.length === 0 ? (\n        <div className=\"bg-black p-8 rounded-lg shadow text-center\">\n          <p className=\"text-white-500\">Aucun post disponible</p>\n          <Link \n            href=\"/post/create\"\n            className=\"inline-block mt-4 text-blue-600 hover:text-blue-800\"\n          >\n            Créer votre premier post\n          </Link>\n        </div>\n      ) : (\n        <PostTable posts={posts} onDelete={handleDelete} />\n      )}\n    </div>\n  );\n}\n\n\n\n\n// \"use client\";\n// import React,{useEffect, useState} from \"react\";\n// import useSWR from \"swr\";\n// import Post from \"../components/Post\";\n// import { PostModel } from \"../types\";\n// import Link from \"next/link\";\n// import { fetcher } from \"../libs\";\n// export default function Posts() {\n//   const [posts,setPosts] = useState<PostModel[]>([]);\n//   const { data, error, isLoading } = useSWR<any>(`/api/posts`, fetcher);\n//   useEffect(() => {\n//     const fetchPosts = async () => {\n//       try {\n//         console.log('Début du fetch...');\n//         const response = await fetch('/api/posts');\n//         console.log('Réponse reçue:', response);\n        \n//         const data = await response.json();\n//         console.log('Données reçues:', data);\n        \n//         setPosts(data);\n//       } catch (error) {\n//         console.error('Erreur complète:', error);\n//       }\n//     };\n//     fetchPosts();\n//   }, []);\n\n\n//   let delete_Post : PostModel['deletePost']= async (id:number) => {\n//     const res = await fetch(`/api/posts/${id}`, {\n//       method: 'DELETE',\n//       headers: {\n//         'Content-Type': 'application/json'\n//       },\n//     });\n//     const content = await res.json();\n//     if(content.success>0)\n//     {\n       \n//       setPosts(posts?.filter((post:PostModel)=>{  return post.id !== id  }));\n//     }\n//   }\n//   return (\n//     <div className=\"w-full max-w-7xl m-auto\">\n//       <div>\n//     <Link href={`/post/create`} className=\"bg-green-500 p-2 inline-block text-white\">Créer</Link>\n\n//     </div>\n//       <table className=\"w-full border-collapse border border-slate-400\">\n//         {/* <caption className=\"caption-top py-5 font-bold text-green-500 text-2xl\">\n//           List Posts - Counter :\n//           <span className=\"text-red-500 font-bold\">{ posts?.length}</span>\n//         </caption> */}\n    \n//         <thead>\n//           <tr className=\"text-center\">\n            \n//             <th className=\"border border-slate-300\">Title</th>\n//             <th className=\"border border-slate-300\">contenu</th>\n//             <th className=\"border border-slate-300\">auteur</th>\n//             <th className=\"border border-slate-300\">Modify</th>\n//           </tr>\n//         </thead>\n//         <tbody>\n//            {/* <tr>\n//               <td colSpan={5}>\n//                  <Link href={`/post/create`} className=\"bg-green-500 p-2 inline-block text-white\">Créer</Link>\n//               </td>\n//            </tr> */}\n//            {\n//               posts && posts.map((item : PostModel)=><Post key={item.id} {...item} deletePost = {delete_Post} />)\n//            }\n\n//             {}\n//         </tbody>\n//       </table>\n//     </div>\n//   );\n  \n// }\n"],"names":[],"mappings":"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","debugId":null}}]
}